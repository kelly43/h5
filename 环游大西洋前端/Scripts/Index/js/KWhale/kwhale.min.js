///<jscompress sourcefile="KPhysical.js" />
/**
 * Created by Keiling on 2016/3/1.
 *////<jscompress sourcefile="KWhaleAnimate.js" />
/**
 * Created by Administrator on 2016/1/12.
 *////<jscompress sourcefile="Line.js" />
/**
 * Created by Keiling on 2016/2/27.
 *////<jscompress sourcefile="RES.js" />
/**
 * Created by Administrator on 2016/1/11.
 *////<jscompress sourcefile="Shape.js" />
/**
 * Created by Keiling on 2016/3/4.
 *////<jscompress sourcefile="Spirte.js" />
/**
 * Created by Keiling on 2016/3/3.
 *////<jscompress sourcefile="Stage.js" />
/**
 * Created by Administrator on 2016/1/10.
 *////<jscompress sourcefile="Text.js" />
/**
 * Created by Keiling on 2016/3/2.
 * get:anchorX=0,anchorY=1,不可设置
 * get:scale 不可设置
 *////<jscompress sourcefile="Utils.js" />
/**
 * Created by Administrator on 2016/1/11.
 * 工具模块
 *////<jscompress sourcefile="Bitmap.js" />
/**
 * Created by Administrator on 2016/1/10.
 * Class Name: 位图 纹理 类
 * Author: Keiling_J
 *////<jscompress sourcefile="DisplayObject.js" />
/**
 * Created by Administrator on 2016/1/10.
 * Class Name: 显示对象 类 （显示对象基类）
 * Author: Keiling_J
 *////<jscompress sourcefile="Form.js" />
/**
 * Created by Keiling on 2016/3/4.
 *////<jscompress sourcefile="Hammerjs.js" />
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license *////<jscompress sourcefile="InitKWahle.js" />
/**
初始化渲染
 *////<jscompress sourcefile="KEvent.js" />
/**
 * Created by Keiling on 2016/2/27.
 */function KPhysical(a,b){this.physicalObject=b;this.displayObject=a;KPhysical.PhysicalSet.push(this)}KPhysical.PhysicalSet=[];KPhysical.prototype.runPhysical=function(){if(this.physicalObject.revolution.isRun){var a=2*this.physicalObject.revolution.r*Math.sin(this.physicalObject.revolution.angle/180*Math.PI);this.displayObject.x=2*this.physicalObject.revolution.r*Math.cos(this.physicalObject.revolution.angle/180*Math.PI)+this.physicalObject.revolution.rotationPoint.x;this.displayObject.y=a+this.physicalObject.revolution.rotationPoint.y;360==this.physicalObject.revolution.angle&&(this.physicalObject.revolution.angle=360);this.physicalObject.revolution.angle+=.2}};KPhysical.stopPhysicalObjctByDisplayObject=function(a){for(var b=0,c=KPhysical.PhysicalSet.length;b<c;b++)KPhysical.PhysicalSet[b].displayObject==a&&(KPhysical.PhysicalSet[b].physicalObject.revolution.isRun=!1)};function KWhaleAnimate(a){KWhaleAnimate.KWHAHLE_ANIMATE_SET.push(this);this._isRotationY=this.isUpdateAnimate=!1;this._rotationY_obj={};this.stage=a}KWhaleAnimate.KWHAHLE_ANIMATE_SET=[];KWhaleAnimate.update=function(){for(var a=KWhaleAnimate.KWHAHLE_ANIMATE_SET,b=0,c=a.length;b<c;b++)a[b].isUpdateAnimate&&a[b]._isRotationY&&(a[b]._rotationY(),console.log("j"))};KWhaleAnimate.prototype.start=function(){this.isUpdateAnimate=!0};KWhaleAnimate.prototype.stop=function(){this.isUpdateAnimate=!1};KWhaleAnimate.prototype.startRotationY=function(){this._isRotationY=!0};KWhaleAnimate.prototype.stopRotationY=function(){this._isRotationY=!1};KWhaleAnimate.prototype.removeRotationY=function(){this.stopRotationY();this._rotationY_obj={}};KWhaleAnimate.prototype.rotationY=function(a,b,c,d,e){this._rotationY_obj={objArr:a,stage:this.stage,r:b,MaxScale:e,rx:c,ry:d}};KWhaleAnimate.prototype._rotationY=function(){for(var a=this._rotationY_obj.rx,b=this._rotationY_obj.ry,c=this._rotationY_obj.objArr,d=this._rotationY_obj.r,e=this._rotationY_obj.MaxScale,g=0,k=c.length;g<k;g++)c[g].x=a+Math.sin(c[g].speed*Math.PI/180)*d,c[g].y=b-Math.cos(c[g].speed*Math.PI/180)*d/10,c[g].z_3d=0+Math.cos(c[g].speed*Math.PI/180)*d,c[g].speed+=.1,c[g].scale=Math.abs(d/(d-c[g].z_3d))>e?e:Math.abs(d/(d-c[g].z_3d)),c[g].z=c[g].z_3d};function Line(a,b,c,d,e){var g=function(a){var c={};for(i in a)c[i]=a[i];return c};void 0==e?(this.startObj=g(a),this.endObj=g(b)):(this.startObj=a,this.endObj=b);this.color=c;this.lineWidth=d;this.alpha=1}Line.prototype=new DisplayObject;Line.prototype.draw=function(a){1!=this.alpha&&(a.globalAlpha=this.alpha);a.beginPath();a.lineWidth=this.lineWidth;a.lineCap="round";a.lineJoin="round";a.strokeStyle=this.color;a.moveTo(this.startObj.x/window.KWRatio,this.startObj.y/window.KWRatio);a.lineTo(this.endObj.x/window.KWRatio,this.endObj.y/window.KWRatio);a.stroke()};function RES(){}RES.RES_JSON={};RES.load=function(a,b){var c=Object.getOwnPropertyNames(RES.RES_JSON).length,d=0;if(0==c)a(1,1),b();else for(var e in RES.RES_JSON){var g=RES.RES_JSON[e].src,k=function(e){var k=new Image;k.src=g;k.complete?(RES.RES_JSON[e].isLoad=!0,RES.DATA_SET[e]=k,d++,a(d,c),d==c&&b()):k.onload=function(){RES.RES_JSON[e].isLoad=!0;RES.DATA_SET[e]=k;d++;a(d,c);d==c&&b()}};try{k(e)}catch(m){console.error("err:img load:"+e)}}};RES.DATA_SET={};RES.getRES=function(a){try{if(RES.RES_JSON[a].isLoad)return RES.DATA_SET[a];console.error("err:img load"+a)}catch(b){console.error("err:img load:"+a)}};RES.getSpirteRES=function(a){if(RES.RES_JSON[a].isLoad){var b={};b.img=RES.DATA_SET[a];a=RES.RES_JSON[a];b.action=a.action;b.res=a.res;return b}alert("err:img load")};var Shape=function(){function a(a,b,e,g){this.x=a.x;this.y=a.y;this.strokeColor=this.fillColor=g;this.lineWidth=1;this.type=0;this.width=b;this.height=e}function b(a,b,e){this.x=a.x;this.y=a.y;this.strokeColor=this.fillColor=e;this.lineWidth=1;this.type=0;this.r=b}a.prototype=new DisplayObject;a.prototype.draw=function(a){var c=this.UseScale(),b=this.UseAnchor();switch(this.type){case 0:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.width)/window.KWRatio,(b.y+this.anchorY*c.height)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.rect(-this.anchorX*c.width/window.KWRatio,-this.anchorY*c.height/window.KWRatio,c.width/window.KWRatio,c.height/window.KWRatio);a.fillStyle=this.fillColor;a.fill();a.restore();break;case 1:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.width)/window.KWRatio,(b.y+this.anchorY*c.height)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.rect(-this.anchorX*c.width/window.KWRatio,-this.anchorY*c.height/window.KWRatio,c.width/window.KWRatio,c.height/window.KWRatio);a.strokeStyle=this.strokeColor;a.fillStyle=this.fillColor;a.lineWidth=this.lineWidth/window.KWRatio*this.scale;a.stroke();a.fill();a.restore();break;case 2:a.save(),a.beginPath(),a.globalAlpha=this.alpha,a.translate((b.x+this.anchorX*c.width)/window.KWRatio,(b.y+this.anchorY*c.height)/window.KWRatio),a.rotate(this.rotation*Math.PI/180),this.showMask(a),a.rect(-this.anchorX*c.width/window.KWRatio,-this.anchorY*c.height/window.KWRatio,c.width/window.KWRatio,c.height/window.KWRatio),a.strokeStyle=this.strokeColor,a.lineWidth=this.lineWidth/window.KWRatio*this.scale,a.fillStyle=this.fillColor,a.stroke(),a.restore()}};b.prototype=new DisplayObject;b.prototype.UseAnchor=function(){var a={x:0,y:0},b=this.UseScale();a.x=this.x-b.r*this.anchorX;a.y=this.y-b.r*this.anchorY;return a};b.prototype.UseScale=function(){var a={r:0};a.r=this.r*this.scale;return a};b.prototype.draw=function(a){var c=this.UseScale(),b=this.UseAnchor();switch(this.type){case 0:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.arc(0,0,this.r/window.KWRatio,0,2*Math.PI,!0);a.fillStyle=this.fillColor;a.fill();a.restore();break;case 1:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.arc(0,0,this.r/window.KWRatio,0,2*Math.PI,!0);a.strokeStyle=this.strokeColor;a.lineWidth=this.lineWidth/window.KWRatio*this.scale;a.fillStyle=this.fillColor;a.stroke();a.fill();a.restore();break;case 2:a.save(),a.beginPath(),a.globalAlpha=this.alpha,a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio),a.rotate(this.rotation*Math.PI/180),this.showMask(a),a.arc(0,0,this.r/window.KWRatio,0,2*Math.PI,!0),a.strokeStyle=this.strokeColor,a.lineWidth=this.lineWidth/window.KWRatio*this.scale,a.fillStyle=this.fillColor,a.stroke(),a.restore()}};return{Rectangle:a,Circle:b}}();function Spirte(a,b){this.img=a.img;this.res=a.res;this.action=a.action;for(items in a.res){this.width=a.res[items].w;this.height=a.res[items].h;this.proportion=this.width/this.height;break}this.curAction=b;this.countRate=this.curActionIndex=0;this.alpha=1;this.isplay=!0;this.isCall=this.isplayOne=!1;this.callFunc=null}Spirte.prototype=new DisplayObject;Spirte.prototype.draw=function(a){var b=this.UseScale(),c=this.UseAnchor();a.save();a.globalAlpha=this.alpha;a.translate((c.x+this.anchorX*b.width)/window.KWRatio,(c.y+this.anchorY*b.height)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);c=this.action[this.curAction].frameRate;this.countRate++;var d;this.isplay?this.isplayOne?this.countRate>=60/c?(this.countRate=0,this.action[this.curAction].frames.length-1>this.curActionIndex?(d=this.res[this.action[this.curAction].frames[this.curActionIndex]],this.curActionIndex++):this.action[this.curAction].frames.length-1==this.curActionIndex&&(this.isCall||(this.isCall=!0,this.curActionIndex=this.action[this.curAction].frames.length-1,this.callFunc&&this.callFunc()),this.isplay=this.isplayOne=!1,d=this.res[this.action[this.curAction].frames[this.curActionIndex]])):d=this.res[this.action[this.curAction].frames[this.curActionIndex]]:this.countRate>=60/c?(this.countRate=0,this.action[this.curAction].frames.length-1>this.curActionIndex?(d=this.res[this.action[this.curAction].frames[this.curActionIndex]],this.curActionIndex++):(this.curActionIndex=0,d=this.res[this.action[this.curAction].frames[this.curActionIndex]])):d=this.res[this.action[this.curAction].frames[this.curActionIndex]]:d=this.res[this.action[this.curAction].frames[this.curActionIndex]];d||(this.curActionIndex=0,d=this.res[this.action[this.curAction].frames[this.curActionIndex]]);a.drawImage(this.img,d.x,d.y,d.w,d.h,-this.anchorX*b.width,-this.anchorY*b.height,b.width,b.height);a.restore()};Spirte.prototype.play=function(a){this.curAction=a;this.isplay=!0};Spirte.prototype.playOne=function(a){this.curAction=a;this.isplayOne=this.isplay=!0};Spirte.prototype.stop=function(){this.isplay=!1};Spirte.prototype.stopAt=function(a){this.stop();this.curActionIndex=a};function Stage(a){a.height=window.innerHeight||document.documentElement.clientHeight;a.width=window.innerWidth||document.documentElement.clientWidth;this.ctx=a.getContext("2d");this.isAction=!0;this.displayObjectSet=[];this.canvas=a;this.sw=a.width;this.sh=a.height}Stage.prototype.removeAllDisplayObject=function(){this.displayObjectSet=[]};Stage.prototype.worldDraw=function(){if(this.isAction){this.canvas.width=this.canvas.width;for(var a=this.displayObjectSet,b=0,c=a.length;b<c;b++)a[b].isAlive&&(0!=a[b].alpha&&a[b].draw(this.ctx),a[b].isAutoReflash&&a[b].evtObject.reflashAttribute());a=KPhysical.PhysicalSet;b=0;for(c=a.length;0<c&&b<c;b++)a[b].runPhysical()}};Stage.DISPLAY_OBJECT_COUNT=0;Stage.prototype.addChild=function(a){a.z=Stage.DISPLAY_OBJECT_COUNT;Stage.DISPLAY_OBJECT_COUNT++;this.displayObjectSet.push(a)};Stage.prototype.removeChild=function(a){for(var b=this.displayObjectSet,c=0,d=b.length;c<d;c++)b[c]==a&&(this.displayObjectSet.splice(c,1),Stage.DISPLAY_OBJECT_COUNT--)};Stage.prototype.reflashZ=function(){for(var a=this.displayObjectSet,b=0,c=a.length;b<c;b++)for(var d=b+1,c=a.length;d<c;d++)if(a[b].z>a[d].z){var e=a[d];a[d]=a[b];a[b]=e}};var Stats=function(){function a(a,c,b){a=document.createElement(a);a.id=c;a.style.cssText=b;return a}function b(c,b,d){var e=a("div",c,"padding:0 0 3px 3px;text-align:left;background:"+d),g=a("div",c+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+b);g.innerHTML=c.toUpperCase();e.appendChild(g);c=a("div",c+"Graph","width:74px;height:30px;background:"+b);e.appendChild(c);for(b=0;74>b;b++)c.appendChild(a("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+d));return e}function c(a){for(var c=t.children,b=0;b<c.length;b++)c[b].style.display=b===a?"block":"none";n=a}function d(a,c){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*c)+"px"}var e=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,g=e(),k=g,m=0,n=0,t=a("div","stats","width:80px;opacity:0.9;cursor:pointer");t.addEventListener("mousedown",function(a){a.preventDefault();c(++n%t.children.length)},!1);var E=0,I=Infinity,A=0,r=b("fps","#0ff","#002"),K=r.children[0],F=r.children[1];t.appendChild(r);var B=0,C=Infinity,v=0,r=b("ms","#0f0","#020"),ia=r.children[0],l=r.children[1];t.appendChild(r);if(self.performance&&self.performance.memory){var u=0,Y=Infinity,V=0,r=b("mb","#f08","#201"),G=r.children[0],ja=r.children[1];t.appendChild(r)}c(n);return{REVISION:14,domElement:t,setMode:c,begin:function(){g=e()},end:function(){var a=e();B=a-g;C=Math.min(C,B);v=Math.max(v,B);ia.textContent=(B|0)+" MS ("+(C|0)+"-"+(v|0)+")";d(l,B/200);m++;if(a>k+1E3&&(E=Math.round(1E3*m/(a-k)),I=Math.min(I,E),A=Math.max(A,E),K.textContent=E+" FPS ("+I+"-"+A+")",d(F,E/100),k=a,m=0,void 0!==u)){var c=performance.memory.usedJSHeapSize,b=performance.memory.jsHeapSizeLimit;u=Math.round(9.54E-7*c);Y=Math.min(Y,u);V=Math.max(V,u);G.textContent=u+" MB ("+Y+"-"+V+")";d(ja,c/b)}return a},update:function(){g=this.end()}}};"object"===typeof module&&(module.exports=Stats);function Text(a,b,c,d){this.text=a;this.fontFamily=b;this.fontSize=c;this.color=d;this.ele=null;this.bold="";this.getRealSize()}Text.prototype=new DisplayObject;Text.prototype.getRealSize=function(){World.ISTEST&&console.log("Text is no suppor the attribute of 'anchor'and 'scale'");this.ele=document.createElement("span");this.ele.style.position="absolute";this.ele.style.backgroundColor="red";this.ele.style.fontFamily=this.fontFamily;this.ele.style.fontSize=this.fontSize/window.KWRatio+"px";this.ele.style.lineHeight=this.fontSize/window.KWRatio+"px";this.ele.innerHTML=this.text;document.body.appendChild(this.ele);this.width=this.ele.offsetWidth*window.KWRatio;this.height=this.ele.offsetHeight*window.KWRatio;document.body.removeChild(this.ele);this.ele=null};Text.prototype.UseAnchor=function(){var a={x:0,y:0};a.x=this.x;a.y=this.y;return a};Text.prototype.draw=function(a){var b,c;b=this.x;c=this.y;a.save();a.globalAlpha=this.alpha;a.translate(b/window.KWRatio,c/window.KWRatio);a.rotate(this.rotation*Math.PI/180);a.font=this.bold+" "+this.fontSize/window.KWRatio+"px "+this.fontFamily;a.fillStyle=this.color;a.fillText(this.text,0,0);a.restore()};void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var a=[];return{REVISION:"14",getAll:function(){return a},removeAll:function(){a=[]},add:function(b){a.push(b)},remove:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},update:function(b){if(0===a.length)return!1;var c=0;for(b=void 0!==b?b:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();c<a.length;)a[c].update(b)?c++:a.splice(c,1);return!0}}}();TWEEN.Tween=function(a){var b={},c={},d={},e=1E3,g=0,k=!1,m=!1,n=0,t=null,E=TWEEN.Easing.Linear.None,I=TWEEN.Interpolation.Linear,A=[],r=null,K=!1,F=null,B=null,C=null,v;for(v in a)b[v]=parseFloat(a[v],10);this.to=function(a,b){return void 0!==b&&(e=b),c=a,this};this.start=function(e){TWEEN.add(this);m=!0;K=!1;t=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();t+=n;for(var g in c){if(c[g]instanceof Array){if(0===c[g].length)continue;c[g]=[a[g]].concat(c[g])}b[g]=a[g];0==b[g]instanceof Array&&(b[g]*=1);d[g]=b[g]||0}return this};this.stop=function(){return m?(TWEEN.remove(this),m=!1,null!==C&&C.call(a),this.stopChainedTweens(),this):this};this.stopChainedTweens=function(){for(var a=0,c=A.length;c>a;a++)A[a].stop()};this.delay=function(a){return n=a,this};this.repeat=function(a){return g=a,this};this.yoyo=function(a){return k=a,this};this.easing=function(a){return E=a,this};this.interpolation=function(a){return I=a,this};this.chain=function(){return A=arguments,this};this.onStart=function(a){return r=a,this};this.onUpdate=function(a){return F=a,this};this.onComplete=function(a){return B=a,this};this.onStop=function(a){return C=a,this};this.update=function(m){var l;if(t>m)return!0;!1===K&&(null!==r&&r.call(a),K=!0);var u=(m-t)/e,u=1<u?1:u,v=E(u);for(l in c){var C=b[l]||0,G=c[l];G instanceof Array?a[l]=I(G,v):("string"==typeof G&&(G=C+parseFloat(G,10)),"number"==typeof G&&(a[l]=C+(G-C)*v))}if(null!==F&&F.call(a,v),1==u){if(0<g){isFinite(g)&&g--;for(l in d){if("string"==typeof c[l]&&(d[l]+=parseFloat(c[l],10)),k)u=d[l],d[l]=c[l],c[l]=u;b[l]=d[l]}return t=m+n,!0}null!==B&&B.call(a);l=0;for(u=A.length;u>l;l++)A[l].start(m);return!1}return!0}};TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*--a)*Math.sin(2*(a-b)*Math.PI/.4)))},Out:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/.4)+1)},InOut:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),1>(a*=2)?-.5*c*Math.pow(2,10*--a)*Math.sin(2*(a-b)*Math.PI/.4):c*Math.pow(2,-10*--a)*Math.sin(2*(a-b)*Math.PI/.4)*.5+1)}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*TWEEN.Easing.Bounce.In(2*a):.5*TWEEN.Easing.Bounce.Out(2*a-1)+.5}}};TWEEN.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),g=TWEEN.Interpolation.Utils.Linear;return 0>b?g(a[0],a[1],d):1<b?g(a[c],a[c-1],c-d):g(a[e],a[e+1>c?c:e+1],d-e)},Bezier:function(a,b){var c,d=0,e=a.length-1,g=Math.pow,k=TWEEN.Interpolation.Utils.Bernstein;for(c=0;e>=c;c++)d+=g(1-b,e-c)*g(b,c)*a[c]*k(e,c);return d},CatmullRom:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),g=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),g(a[(e-1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(g(a[0],a[0],a[1],a[1],-d)-a[0]):1<b?a[c]-(g(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):g(a[e?e-1:0],a[e],a[e+1>c?c:e+1],a[e+2>c?c:e+2],d-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c,d=1;if(a[b])return a[b];for(c=b;1<c;c--)d*=c;return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var g=e*e;return(2*b-2*c+a+d)*e*g+(-3*b+3*c-2*a-d)*g+a*e+b}}};"undefined"!=typeof module&&module.exports&&(module.exports=TWEEN);var KWhaleUtils=function(){return{Tween_YoYo:function(a,b,c,d,e){var g={},k;for(k in b)g[k]=a[k];b=(new TWEEN.Tween(a)).to(b,d).delay(c).easing(e);a=(new TWEEN.Tween(a)).to(g,d).delay(c).easing(e);b.chain(a);a.chain(b);return b},AddStageByScaleH:function(a,b,c){b.proportion&&(b.height=a.sh*c,b.width=b.height*b.proportion,b.width>a.sw&&(b.width=a.sw,b.height=b.width/b.proportion),a.addChild(b))},Tween_Loop:function(a,b,c,d,e){return(new TWEEN.Tween(a)).to(b,d).delay(c).repeat(Infinity).easing(e)},Tween:function(a,b,c,d,e){return(new TWEEN.Tween(a)).delay(c).to(b,d).easing(e)},AddStageByScaleHNoCheck:function(a,b,c){b.proportion&&(b.height=a.sh*c,b.width=b.height*b.proportion,a.addChild(b))},getRandomOne2Numer:function(a){return Math.abs(Math.ceil(Math.random()*a))},getPointByRotationAndPointAndLineWidth:function(a,b,c){return{x:Math.ceil(a.x+2*c*Math.cos(b/180*Math.PI)),y:Math.ceil(a.y+2*c*Math.sin(b/180*Math.PI))}},getRotationBy2Point:function(a,b){return 180*Math.atan2(a.y-b.y,a.x-b.x)/Math.PI+180},distPoint:function(a,b){return Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y))},addDomByScale:function(a,b,c,d,e){var g=document.createElement("div");g.style.position="absolute";"auto"!=b&&(g.style.height=a.sh*b/window.KWRatio+"px");"auto"!=c&&(g.style.width=a.sh*c/window.KWRatio+"px");g.style.top=a.sh*d/window.KWRatio+"px";g.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";g.innerHTML=e;document.body.appendChild(g);return g},getImgBySrcAndCall:function(a,b){var c=new Image;c.src=a;c.onload=function(){b(c)}},AddStageByScaleWNoCheck:function(a,b,c){b.proportion&&(b.width=a.sw*c,b.height=b.width/b.proportion,a.addChild(b))},getMask:function(a,b){var c=new Shape.Rectangle({x:0,y:0},(window.innerWidth||document.documentElement.clientWidth)*window.KWRatio,(window.innerHeight||document.documentElement.clientHeight)*window.KWRatio,a);c.alpha=b;return c},getBmpByName:function(a){a=new Bitmap(RES.getRES(a));a.anchorX=.5;return a}}}();(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c,b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),m=window.setTimeout(function(){c(d+e)},e);a=d+e;return m});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();function World(){}World.FPS=0;World.isShowFPS=!1;World.ISTEST=!1;World.STAT;World.init=function(){window.initKW()};World.Go=function(a){World.isShowFPS&&(World.STAT=new Stats,document.body.appendChild(World.STAT.domElement));(function c(){World.isShowFPS?(World.STAT.begin(),window.requestAnimationFrame(c),World.STAT.end()):window.requestAnimationFrame(c);a()})()};function Bitmap(a){this.img=a;this.width=a.width;this.height=a.height;this.proportion=a.width/a.height;this.alpha=1;this.is3D=!1;this.z_3d=0;this.z_r=100}Bitmap.prototype=new DisplayObject;Bitmap.prototype.draw=function(a){this.is3D&&(this.scale=Math.abs(this.z_r/(this.z_r-this.z_3d)));var b=this.UseScale(),c=this.UseAnchor(),d=this.img,e=this.rotation,g=this.anchorX,k=this.anchorY,m=this.alpha;a.save();var n=1;-1==this.scale&&(a.scale(-1,1),n=-1);1!=m&&(a.globalAlpha=m);a.translate((c.x*n+g*b.width*n)/window.KWRatio,(c.y+k*b.height)/window.KWRatio);1!=e&&a.rotate(e*Math.PI/180);this.showMask(a);a.drawImage(d,-g*b.width,-k*b.height,b.width,b.height);a.restore()};function DisplayObject(){this.anchorY=this.anchorX=this.height=this.width=this.y=this.x=0;this.scale=1;this.z=this.rotation=0;this.isAlive=!0;this.mask=this.evtObject=null}DisplayObject.prototype.showMask=function(a){this.mask&&("arc"==this.mask.type&&(a.beginPath(),this.mask.pos?a.arc(this.mask.pos.x,this.mask.pos.y,this.mask.r/window.KWRatio,0,2*Math.PI):a.arc(0,0,this.mask.r/window.KWRatio,0,2*Math.PI),a.closePath()),a.clip())};DisplayObject.prototype.draw=function(a){};DisplayObject.prototype.setZ=function(a,b){this.z=a;b.reflashZ()};DisplayObject.prototype.setAnchor=function(a){this.anchorY=this.anchorX=a};DisplayObject.prototype.UseAnchor=function(){var a={x:0,y:0},b=this.UseScale();a.x=this.x-b.width*this.anchorX;a.y=this.y-b.height*this.anchorY;return a};DisplayObject.prototype.setScale=function(a){this.scale=a};DisplayObject.prototype.UseScale=function(){var a={height:0,width:0};a.width=this.width*this.scale;a.height=this.height*this.scale;return a};var Form=function(){function a(a){a.ele.style.width=a.width/window.KWRatio*a.scale+"px";a.ele.style.height=a.height/window.KWRatio*a.scale+"px";a.ele.style.top=(a.y-a.height*a.anchorY*a.scale)/window.KWRatio+"px";a.ele.style.left=(a.x-a.width*a.anchorX*a.scale)/window.KWRatio+"px";a.ele.style.opacity=a.alpha;a.ele.style.fontSize=a.height/window.KWRatio*a.scale*.7+"px";a.ele.style.lineHeight=a.height/window.KWRatio*a.scale+"px"}var b=function(a,c,b,d){this.normal_Text="";this.x=a;this.y=c;this.scale=this.alpha=1;this.anchorY=this.anchorX=0;this.width=b*this.scale;this.height=d*this.scale;this.ele=document.createElement("input");this.ele.type="text";this.ele.style.position="absolute";this.ele.style.width=this.width/window.KWRatio*this.scale+"px";this.ele.style.height=this.height/window.KWRatio*this.scale+"px";this.ele.style.top=(this.y-this.height*this.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.x-this.width*this.anchorX)/window.KWRatio+"px";this.ele.style.opacity=this.alpha;this.ele.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";this.ele.style.fontSize=this.height/8*2.4/window.KWRatio*this.scale+"px";this.ele.style.lineHeight=this.height/window.KWRatio*this.scale+"px";document.body.appendChild(this.ele);var e=this;this.ele.onblur=function(){""==e.ele.value&&(e.ele.value=e.normal_Text)};this.ele.onfocus=function(){e.ele.value==e.normal_Text&&(e.ele.value="")}};b.prototype.setNormalText=function(a){this.ele.placeholder=a};b.prototype.draw=function(c){a(this)};b.prototype.destroy=function(a){a&&a.removeChild(this);document.body.removeChild(this.ele)};b.prototype.getValue=function(){return this.ele.value};var c=function(a,c,b,d){this.normal_Text="";this.x=a;this.y=c;this.scale=this.alpha=1;this.anchorY=this.anchorX=0;this.width=b*this.scale;this.height=d*this.scale;this.ele=document.createElement("textarea");this.ele.style.position="absolute";this.ele.style.width=this.width/window.KWRatio*this.scale+"px";this.ele.style.height=this.height/window.KWRatio*this.scale+"px";this.ele.style.top=(this.y-this.height*this.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.x-this.width*this.anchorX)/window.KWRatio+"px";this.ele.style.opacity=this.alpha;this.ele.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";document.body.appendChild(this.ele);var e=this;this.ele.onblur=function(){""==e.ele.value&&(e.ele.value=e.normal_Text)};this.ele.onfocus=function(){e.ele.value==e.normal_Text&&(e.ele.value="")}};c.prototype.setFontSize=function(a){this.ele.style.fontSize=a/window.KWRatio*this.scale+"px"};c.prototype.setNormalText=function(a){this.normal_Text=a;this.ele.value=a};c.prototype.draw=function(c){a(this)};c.prototype.destroy=function(a){a&&a.removeChild(this);document.body.removeChild(this.ele)};c.prototype.getValue=function(){return this.ele.value};var d=function(a,c,b,d){this.x=a;this.y=c;this.scale=this.alpha=1;this.anchorY=this.anchorX=0;this.width=b*this.scale;this.height=d*this.scale;this.ele=document.createElement("select");this.ele.style.position="absolute";this.ele.style.width=this.width/window.KWRatio*this.scale+"px";this.ele.style.height=this.height/window.KWRatio*this.scale+"px";this.ele.style.top=(this.y-this.height*this.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.x-this.width*this.anchorX)/window.KWRatio+"px";this.ele.style.opacity=this.alpha;this.ele.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";this.ele.style.fontSize=this.height/8*2.4/window.KWRatio*this.scale+"px";this.ele.style.lineHeight=this.height/window.KWRatio*this.scale+"px";document.body.appendChild(this.ele)};d.prototype.setItem=function(a){this.ele.innerHTML="";for(var c=0,b=a.length;c<b;c++){var d=document.createElement("option");d.text=a[c];this.ele.appendChild(d)}};d.prototype.draw=function(c){a(this)};d.prototype.destroy=function(a){a.removeChild(this);document.body.removeChild(this.ele)};return{Text:b,Select:d,Textarea:c}}();!function(a,b,c,d){function e(a,c,b){return setTimeout(t(a,b),c)}function g(a,c,b){return Array.isArray(a)?(k(a,b[c],b),!0):!1}function k(a,c,b){var f;if(a)if(a.forEach)a.forEach(c,b);else if(a.length!==d)for(f=0;f<a.length;)c.call(b,a[f],f,a),f++;else for(f in a)a.hasOwnProperty(f)&&c.call(b,a[f],f,a)}function m(f,c,b){var h="DEPRECATED METHOD: "+c+"\n"+b+" AT \n";return function(){var c=Error("get-stack-trace"),c=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",b=a.console&&(a.console.warn||a.console.log);return b&&b.call(a.console,h,c),f.apply(this,arguments)}}function n(a,c,b){var f=c.prototype;c=a.prototype=Object.create(f);c.constructor=a;c._super=f;b&&M(c,b)}function t(a,c){return function(){return a.apply(c,arguments)}}function E(a,c){return typeof a==Sa?a.apply(c?c[0]||d:d,c):a}function I(a,c,b){k(K(c),function(c){a.addEventListener(c,b,!1)})}function A(a,c,b){k(K(c),function(c){a.removeEventListener(c,b,!1)})}function r(a,c){for(;a;){if(a==c)return!0;a=a.parentNode}return!1}function K(a){return a.trim().split(/\s+/g)}function F(a,c,b){if(a.indexOf&&!b)return a.indexOf(c);for(var f=0;f<a.length;){if(b&&a[f][b]==c||!b&&a[f]===c)return f;f++}return-1}function B(a){return Array.prototype.slice.call(a,0)}function C(a,c,b){for(var f=[],p=[],h=0;h<a.length;){var d=c?a[h][c]:a[h];0>F(p,d)&&f.push(a[h]);p[h]=d;h++}return b&&(f=c?f.sort(function(a,f){return a[c]>f[c]}):f.sort()),f}function v(a,c){for(var f,b,h=c[0].toUpperCase()+c.slice(1),e=0;e<Ea.length;){if(f=Ea[e],b=f?f+h:c,b in a)return b;e++}return d}function ia(c){c=c.ownerDocument||c;return c.defaultView||c.parentWindow||a}function l(a,c){var b=this;this.manager=a;this.callback=c;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(c){E(a.options.enable,[a])&&b.handler(c)};this.init()}function u(a){var c=a.options.inputClass;return new (c?c:Ta?ta:Ua?ka:Fa?ua:ha)(a,Y)}function Y(a,c,b){var f,h,p=b.pointers.length;f=b.changedPointers.length;var e=c&w&&0===p-f,p=c&(q|D)&&0===p-f;b.isFirst=!!e;b.isFinal=!!p;e&&(a.session={});b.eventType=c;c=a.session;e=b.pointers;p=e.length;c.firstInput||(c.firstInput=V(b));1<p&&!c.firstMultiple?c.firstMultiple=V(b):1===p&&(c.firstMultiple=!1);f=c.firstInput;h=(p=c.firstMultiple)?p.center:f.center;var g=b.center=G(e);b.timeStamp=va();b.deltaTime=b.timeStamp-f.timeStamp;b.angle=sa(h,g);b.distance=ga(h,g);f=b.center;h=c.offsetDelta||{};var g=c.prevDelta||{},k=c.prevInput||{};b.eventType!==w&&k.eventType!==q||(g=c.prevDelta={x:k.deltaX||0,y:k.deltaY||0},h=c.offsetDelta={x:f.x,y:f.y});b.deltaX=g.x+(f.x-h.x);b.deltaY=g.y+(f.y-h.y);b.offsetDirection=ja(b.deltaX,b.deltaY);h=b.deltaTime;f=b.deltaX/h||0;h=b.deltaY/h||0;b.overallVelocityX=f;b.overallVelocityY=h;b.overallVelocity=R(f)>R(h)?f:h;p?(f=p.pointers,f=ga(e[0],e[1],la)/ga(f[0],f[1],la)):f=1;b.scale=f;p?(p=p.pointers,e=sa(e[1],e[0],la)+sa(p[1],p[0],la)):e=0;b.rotation=e;b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length;h=c.lastInterval||b;e=b.timeStamp-h.timeStamp;b.eventType!=D&&(e>Va||h.velocity===d)?(f=b.deltaX-h.deltaX,h=b.deltaY-h.deltaY,g=f/e||0,k=h/e||0,e=g,p=k,g=R(g)>R(k)?g:k,f=ja(f,h),c.lastInterval=b):(g=h.velocity,e=h.velocityX,p=h.velocityY,f=h.direction);b.velocity=g;b.velocityX=e;b.velocityY=p;b.direction=f;c=a.element;r(b.srcEvent.target,c)&&(c=b.srcEvent.target);b.target=c;a.emit("hammer.input",b);a.recognize(b);a.session.prevInput=b}function V(a){for(var c=[],b=0;b<a.pointers.length;)c[b]={clientX:W(a.pointers[b].clientX),clientY:W(a.pointers[b].clientY)},b++;return{timeStamp:va(),pointers:c,center:G(c),deltaX:a.deltaX,deltaY:a.deltaY}}function G(a){var c=a.length;if(1===c)return{x:W(a[0].clientX),y:W(a[0].clientY)};for(var b=0,f=0,d=0;c>d;)b+=a[d].clientX,f+=a[d].clientY,d++;return{x:W(b/c),y:W(f/c)}}function ja(a,c){return a===c?ma:R(a)>=R(c)?0>a?Z:aa:0>c?ba:ca}function ga(a,c,b){b||(b=Ga);var f=c[b[0]]-a[b[0]];a=c[b[1]]-a[b[1]];return Math.sqrt(f*f+a*a)}function sa(a,c,b){b||(b=Ga);return 180*Math.atan2(c[b[1]]-a[b[1]],c[b[0]]-a[b[0]])/Math.PI}function ha(){this.evEl=Wa;this.evWin=Xa;this.pressed=!1;l.apply(this,arguments)}function ta(){this.evEl=Ha;this.evWin=Ia;l.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function Da(){this.evTarget=Ya;this.evWin=Za;this.started=!1;l.apply(this,arguments)}function ka(){this.evTarget=$a;this.targetIds={};l.apply(this,arguments)}function ab(a,c){var b=B(a.touches),f=this.targetIds;if(c&(w|S)&&1===b.length)return f[b[0].identifier]=!0,[b,b];var h,d=B(a.changedTouches),e=[],g=this.target;if(h=b.filter(function(a){return r(a.target,g)}),c===w)for(b=0;b<h.length;)f[h[b].identifier]=!0,b++;for(b=0;b<d.length;)f[d[b].identifier]&&e.push(d[b]),c&(q|D)&&delete f[d[b].identifier],b++;return e.length?[C(h.concat(e),"identifier",!0),e]:void 0}function ua(){l.apply(this,arguments);var a=t(this.handler,this);this.touch=new ka(this.manager,a);this.mouse=new ha(this.manager,a);this.primaryTouch=null;this.lastTouches=[]}function Ja(a){a=a.changedPointers[0];if(a.identifier===this.primaryTouch){var b={x:a.clientX,y:a.clientY};this.lastTouches.push(b);var c=this.lastTouches;setTimeout(function(){var a=c.indexOf(b);-1<a&&c.splice(a,1)},bb)}}function wa(a,b){this.manager=a;this.set(b)}function cb(a){if(-1<a.indexOf(T))return T;var b=-1<a.indexOf(da),c=-1<a.indexOf(ea);return b&&c?T:b||c?b?da:ea:-1<a.indexOf(xa)?xa:Ka}function N(a){this.options=M({},this.defaults,a||{});this.id=db++;this.manager=null;a=this.options.enable;this.options.enable=a===d?!0:a;this.state=na;this.simultaneous={};this.requireFail=[]}function La(a){return a&fa?"cancel":a&Q?"end":a&X?"move":a&H?"start":""}function Ma(a){return a==ca?"down":a==ba?"up":a==Z?"left":a==aa?"right":""}function oa(a,b){var c=b.manager;return c?c.get(a):a}function J(){N.apply(this,arguments)}function pa(){J.apply(this,arguments);this.pY=this.pX=null}function ya(){J.apply(this,arguments)}function za(){N.apply(this,arguments);this._input=this._timer=null}function Aa(){J.apply(this,arguments)}function Ba(){J.apply(this,arguments)}function qa(){N.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function O(a,b){b=b||{};var c=b.recognizers;return b.recognizers=c===d?O.defaults.preset:c,new Ca(a,b)}function Ca(a,b){this.options=M({},O.defaults,b||{});this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=a;this.input=u(this);this.touchAction=new wa(this,this.options.touchAction);Na(this,!0);k(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]);a[3]&&b.requireFailure(a[3])},this)}function Na(a,b){var c=a.element;if(c.style){var f;k(a.options.cssProps,function(d,h){f=v(c.style,h);b?(a.oldCssProps[f]=c.style[f],c.style[f]=d):c.style[f]=a.oldCssProps[f]||""});b||(a.oldCssProps={})}}function eb(a,c){var f=b.createEvent("Event");f.initEvent(a,!0,!0);f.gesture=c;c.target.dispatchEvent(f)}var M,Ea=" webkit Moz MS ms o".split(" "),fb=b.createElement("div"),Sa="function",W=Math.round,R=Math.abs,va=Date.now;M="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var f=arguments[c];if(f!==d&&null!==f)for(var e in f)f.hasOwnProperty(e)&&(b[e]=f[e])}return b}:Object.assign;var Oa=m(function(a,b,c){for(var f=Object.keys(b),h=0;h<f.length;)(!c||c&&a[f[h]]===d)&&(a[f[h]]=b[f[h]]),h++;return a},"extend","Use `assign`."),gb=m(function(a,b){return Oa(a,b,!0)},"merge","Use `assign`."),db=1,hb=/mobile|tablet|ip(ad|hone|od)|android/i,Fa="ontouchstart"in a,Ta=v(a,"PointerEvent")!==d,Ua=Fa&&hb.test(navigator.userAgent),Va=25,w=1,S=2,q=4,D=8,ma=1,Z=2,aa=4,ba=8,ca=16,L=Z|aa,U=ba|ca,Pa=L|U,Ga=["x","y"],la=["clientX","clientY"];l.prototype={handler:function(){},init:function(){this.evEl&&I(this.element,this.evEl,this.domHandler);this.evTarget&&I(this.target,this.evTarget,this.domHandler);this.evWin&&I(ia(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler);this.evTarget&&A(this.target,this.evTarget,this.domHandler);this.evWin&&A(ia(this.element),this.evWin,this.domHandler)}};var ib={mousedown:w,mousemove:S,mouseup:q},Wa="mousedown",Xa="mousemove mouseup";n(ha,l,{handler:function(a){var b=ib[a.type];b&w&&0===a.button&&(this.pressed=!0);b&S&&1!==a.which&&(b=q);this.pressed&&(b&q&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});var jb={pointerdown:w,pointermove:S,pointerup:q,pointercancel:D,pointerout:D},kb={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ha="pointerdown",Ia="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Ha="MSPointerDown",Ia="MSPointerMove MSPointerUp MSPointerCancel");n(ta,l,{handler:function(a){var b=this.store,c=!1,f=a.type.toLowerCase().replace("ms",""),f=jb[f],d=kb[a.pointerType]||a.pointerType,e="touch"==d,g=F(b,a.pointerId,"pointerId");f&w&&(0===a.button||e)?0>g&&(b.push(a),g=b.length-1):f&(q|D)&&(c=!0);0>g||(b[g]=a,this.callback(this.manager,f,{pointers:b,changedPointers:[a],pointerType:d,srcEvent:a}),c&&b.splice(g,1))}});var lb={touchstart:w,touchmove:S,touchend:q,touchcancel:D},Ya="touchstart",Za="touchstart touchmove touchend touchcancel";n(Da,l,{handler:function(a){var b=lb[a.type];if(b===w&&(this.started=!0),this.started){var c,f=B(a.touches);c=B(a.changedTouches);c=(b&(q|D)&&(f=C(f.concat(c),"identifier",!0)),[f,c]);b&(q|D)&&0===c[0].length-c[1].length&&(this.started=!1);this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:"touch",srcEvent:a})}}});var mb={touchstart:w,touchmove:S,touchend:q,touchcancel:D},$a="touchstart touchmove touchend touchcancel";n(ka,l,{handler:function(a){var b=mb[a.type],c=ab.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:"touch",srcEvent:a})}});var bb=2500;n(ua,l,{handler:function(a,b,c){var f="touch"==c.pointerType,d="mouse"==c.pointerType;if(!(d&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(f)b&w?(this.primaryTouch=c.changedPointers[0].identifier,Ja.call(this,c)):b&(q|D)&&Ja.call(this,c);else{if(f=d)a:{for(var f=c.srcEvent.clientX,d=c.srcEvent.clientY,e=0;e<this.lastTouches.length;e++){var h=this.lastTouches[e],g=Math.abs(d-h.y);if(25>=Math.abs(f-h.x)&&25>=g){f=!0;break a}}f=!1}if(f)return}this.callback(a,b,c)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Qa=v(fb.style,"touchAction"),Ra=Qa!==d,Ka="auto",xa="manipulation",T="none",da="pan-x",ea="pan-y",ra=function(){if(!Ra)return!1;var b={},c=a.CSS&&a.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(f){b[f]=c?a.CSS.supports("touch-action",f):!0}),b}();wa.prototype={set:function(a){"compute"==a&&(a=this.compute());Ra&&this.manager.element.style&&ra[a]&&(this.manager.element.style[Qa]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return k(this.manager.recognizers,function(b){E(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),cb(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var f=this.actions,d=-1<f.indexOf(T)&&!ra[T],e=-1<f.indexOf(ea)&&!ra[ea],f=-1<f.indexOf(da)&&!ra[da];if(d){var g=2>a.distance,k=250>a.deltaTime;if(1===a.pointers.length&&g&&k)return}return f&&e?void 0:d||e&&c&L||f&&c&U?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0;a.preventDefault()}};var na=1,H=2,X=4,Q=8,P=Q,fa=16;N.prototype={defaults:{},set:function(a){return M(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(g(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=oa(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return g(a,"dropRecognizeWith",this)?this:(a=oa(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(g(a,"requireFailure",this))return this;var b=this.requireFail;return a=oa(a,this),-1===F(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(g(a,"dropRequireFailure",this))return this;a=oa(a,this);a=F(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,f=this.state;Q>f&&b(c.options.event+La(f));b(c.options.event);a.additionalEvent&&b(a.additionalEvent);f>=Q&&b(c.options.event+La(f))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|na)))return!1;a++}return!0},recognize:function(a){a=M({},a);return E(this.options.enable,[this,a])?(this.state&(P|fa|32)&&(this.state=na),this.state=this.process(a),void(this.state&(H|X|Q|fa)&&this.tryEmit(a))):(this.reset(),void(this.state=32))},process:function(a){},getTouchAction:function(){},reset:function(){}};n(J,N,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,f=b&(H|X);a=this.attrTest(a);return f&&(c&D||!a)?b|fa:f||a?c&q?b|Q:b&H?b|X:H:32}});n(pa,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&L&&b.push(ea),a&U&&b.push(da),b},directionTest:function(a){var b=this.options,c=!0,f=a.distance,d=a.direction,e=a.deltaX,g=a.deltaY;return d&b.direction||(b.direction&L?(d=0===e?ma:0>e?Z:aa,c=e!=this.pX,f=Math.abs(a.deltaX)):(d=0===g?ma:0>g?ba:ca,c=g!=this.pY,f=Math.abs(a.deltaY))),a.direction=d,c&&f>b.threshold&&d&b.direction},attrTest:function(a){return J.prototype.attrTest.call(this,a)&&(this.state&H||!(this.state&H)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;this.pY=a.deltaY;var b=Ma(a.direction);b&&(a.additionalEvent=this.options.event+b);this._super.emit.call(this,a)}});n(ya,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[T]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&H)},emit:function(a){1!==a.scale&&(a.additionalEvent=this.options.event+(1>a.scale?"in":"out"));this._super.emit.call(this,a)}});n(za,N,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ka]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,f=a.distance<b.threshold,d=a.deltaTime>b.time;if(this._input=a,!f||!c||a.eventType&(q|D)&&!d)this.reset();else if(a.eventType&w)this.reset(),this._timer=e(function(){this.state=P;this.tryEmit()},b.time,this);else if(a.eventType&q)return P;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===P&&(a&&a.eventType&q?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=va(),this.manager.emit(this.options.event,this._input)))}});n(Aa,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[T]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&H)}});n(Ba,J,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:L|U,pointers:1},getTouchAction:function(){return pa.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(L|U)?b=a.overallVelocity:c&L?b=a.overallVelocityX:c&U&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&R(b)>this.options.velocity&&a.eventType&q},emit:function(a){var b=Ma(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a);this.manager.emit(this.options.event,a)}});n(qa,N,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xa]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&w&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=q)return this.failTimeout();c=this.pTime?a.timeStamp-this.pTime<b.interval:!0;d=!this.pCenter||ga(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;d&&c?this.count+=1:this.count=1;this._input=a;if(0===this.count%b.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=P;this.tryEmit()},b.interval,this),H):P}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==P&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});O.VERSION="2.0.8";O.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Aa,{enable:!1}],[ya,{enable:!1},["rotate"]],[Ba,{direction:L}],[pa,{direction:L},["swipe"]],[qa],[qa,{event:"doubletap",taps:2},["tap"]],[za]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};Ca.prototype={set:function(a){return M(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,f=b.curRecognizer;(!f||f&&f.state&P)&&(f=b.curRecognizer=null);for(var e=0;e<d.length;)c=d[e],2===b.stopped||f&&c!=f&&!c.canRecognizeWith(f)?c.reset():c.recognize(a),!f&&c.state&(H|X|Q)&&(f=b.curRecognizer=c),e++}},get:function(a){if(a instanceof N)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(g(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(g(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers;a=F(b,a);-1!==a&&(b.splice(a,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return k(K(a),function(a){c[a]=c[a]||[];c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return k(K(a),function(a){b?c[a]&&c[a].splice(F(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&eb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a;b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&Na(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};M(O,{INPUT_START:w,INPUT_MOVE:S,INPUT_END:q,INPUT_CANCEL:D,STATE_POSSIBLE:na,STATE_BEGAN:H,STATE_CHANGED:X,STATE_ENDED:Q,STATE_RECOGNIZED:P,STATE_CANCELLED:fa,STATE_FAILED:32,DIRECTION_NONE:ma,DIRECTION_LEFT:Z,DIRECTION_RIGHT:aa,DIRECTION_UP:ba,DIRECTION_DOWN:ca,DIRECTION_HORIZONTAL:L,DIRECTION_VERTICAL:U,DIRECTION_ALL:Pa,Manager:Ca,Input:l,TouchAction:wa,TouchInput:ka,MouseInput:ha,PointerEventInput:ta,TouchMouseInput:ua,SingleTouchInput:Da,Recognizer:N,AttrRecognizer:J,Tap:qa,Pan:pa,Swipe:Ba,Pinch:ya,Rotate:Aa,Press:za,on:I,off:A,each:k,merge:gb,extend:Oa,assign:M,inherit:n,bindFn:t,prefixed:v});("undefined"!=typeof a?a:"undefined"!=typeof self?self:{}).Hammer=O;"function"==typeof define&&define.amd?define(function(){return O}):"undefined"!=typeof module&&module.exports?module.exports=O:a[c]=O}(window,document,"Hammer");window.initKW=function(){try{(function(a){var b=function(a){var b;CanvasRenderingContext2D&&(b=document.createElement("canvas").getContext("2d").webkitBackingStorePixelRatio);return(window.devicePixelRatio||1)/(a.backingStorePixelRatio||b||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)}(a);1!==b&&(function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},function(c,d){a[d]=function(a){return function(){var d,e,m=Array.prototype.slice.call(arguments);if("all"===c)m=m.map(function(a){return a*b});else if(Array.isArray(c))for(d=0,e=c.length;d<e;d++)m[c[d]]*=b;return a.apply(this,m)}}(a[d])}),a.stroke=function(a){return function(){this.lineWidth*=b;a.apply(this,arguments);this.lineWidth/=b}}(a.stroke),a.fillText=function(a){return function(){var c=Array.prototype.slice.call(arguments);c[1]*=b;c[2]*=b;this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c*b+d});a.apply(this,c);this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c/b+d})}}(a.fillText),a.strokeText=function(a){return function(){var c=Array.prototype.slice.call(arguments);c[1]*=b;c[2]*=b;this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c*b+d});a.apply(this,c);this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c/b+d})}}(a.strokeText),window.KWRatio=b)})(CanvasRenderingContext2D.prototype),function(a){a.getContext=function(a){return function(b){var c=a.call(this,b);"2d"===b&&(b=c.backingStorePixelRatio||c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1,b=(window.devicePixelRatio||1)/b,1<b&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=b,this.height*=b));return c}}(a.getContext)}(HTMLCanvasElement.prototype),window.KWRatio||(window.KWRatio=1),document.body.style.overflow="hidden"}catch(a){}};function KEvent(a,b,c){a.evtObject=this;a.isAutoReflash=!1;this.disobj=a;this.isDestory=!1;this.isAutoFreshAfterEvent=!0;this.ele=document.createElement("div");this.ele.style.position="absolute";this.ele.style.top=(this.disobj.y-this.disobj.height*this.disobj.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.disobj.x-this.disobj.width*this.disobj.anchorX)/window.KWRatio+"px";this.ele.style.width=this.disobj.width*this.disobj.scale/window.KWRatio+"px";this.ele.style.height=this.disobj.height*this.disobj.scale/window.KWRatio+"px";document.body.appendChild(this.ele);this.times=b.times||null;KEvent.EventSet.push(this.ele);switch(b.type){case "touchstart":this.TOUCHBEGIN(c);break;case "touchend":this.TOUCHEND(c);break;case "touchmove":this.TOUCHMOVE(c);break;case "touchstartandmove":this.TOUCHBEGINANDMOVE(c);break;case "touchout":this.TOUCHOUT(c)}}KEvent.EventSet=[];KEvent.Remove=function(a){for(var b=0,c=KEvent.EventSet.length;b<c;b++)KEvent.EventSet[b]==a&&(KEvent.EventSet.splice(b,1),c=KEvent.EventSet.length)};KEvent.RemoveAllEventObj=function(a){for(var b=0,c=KEvent.EventSet.length;b<c;b++)a=KEvent.EventSet[b],document.body.removeChild(a);KEvent.EventSet=[]};KEvent.prototype.TOUCHBEGIN=function(a){var b=this;this.ele.addEventListener("touchstart",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1);World.ISTEST&&this.ele.addEventListener("mousedown",function(c){a(c);b.reflashAttribute()},!0)};KEvent.prototype.TOUCHEND=function(a){var b=this;this.ele.addEventListener("touchend",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1);World.ISTEST&&this.ele.addEventListener("mouseup",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHMOVE=function(a){var b=this;this.ele.addEventListener("touchmove",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1);World.ISTEST&&this.ele.addEventListener("mousemove",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHOUT=function(a){var b=this;this.ele.addEventListener("touchout",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1);World.ISTEST&&this.ele.addEventListener("mouseout",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHBEGINANDMOVE=function(a){var b=this,c=!1,d,e;this.TOUCHBEGIN(function(){c=!0;d=b.disobj.x;e=b.disobj.y;a[0]()});this.TOUCHEND(function(g){c=!1;d=b.disobj.x;e=b.disobj.y;a[2]()});this.TOUCHMOVE(function(b){if(c){var g=Number(b.clientY)-e;b.sx=Number(b.clientX)-d;b.sy=g;a[1](b)}});this.TOUCHOUT(function(g){c&&(c=!1,d=b.disobj.x,e=b.disobj.y,a[2]())})};KEvent.shakeCall;var SHAKE_THRESHOLD=500,last_update=0,x=y=z=last_x=last_y=last_z=0;KEvent.deviceMotionHandler=function(a){a=a.accelerationIncludingGravity;var b=(new Date).getTime();document.body.innerHTML=x+"_"+y+"_"+z;if(100<b-last_update){var c=b-last_update;last_update=b;x=a.x;y=a.y;z=a.z;Math.abs(x+y+z-last_x-last_y-last_z)/c*1E4>SHAKE_THRESHOLD&&KEvent.shakeCall();last_x=x;last_y=y;last_z=z}};KEvent.ADDSHAKE=function(a){KEvent.shakeCall=a;window.DeviceMotionEvent?window.addEventListener("devicemotion",KEvent.deviceMotionHandler,!1):alert("\u60a8\u597d\uff0c\u4f60\u76ee\u524d\u6240\u7528\u7684\u8bbe\u7f6e\u597d\u50cf\u4e0d\u652f\u6301\u91cd\u529b\u611f\u5e94\u54e6\uff01")};KEvent.REMOVESHAKE=function(){window.removeEventListener("devicemotion",KEvent.deviceMotionHandler,!1)};KEvent.prototype.destory=function(){this.isDestory||(this.isDestory=!0,document.body.removeChild(this.ele),KEvent.Remove(this.ele))};KEvent.prototype.reAdd=function(){this.isDestory&&(this.isDestory=!1,document.body.appendChild(this.ele),KEvent.EventSet.push(this.ele))};KEvent.prototype.reflashAttribute=function(){this.isAutoFreshAfterEvent&&(this.ele.style.position="absolute",this.ele.style.top=(this.disobj.y-this.disobj.height*this.disobj.scale*this.disobj.anchorY)/window.KWRatio+"px",this.ele.style.left=(this.disobj.x-this.disobj.width*this.disobj.scale*this.disobj.anchorX)/window.KWRatio+"px",this.ele.style.width=this.disobj.width*this.disobj.scale/window.KWRatio+"px",this.ele.style.height=this.disobj.height*this.disobj.scale/window.KWRatio+"px")};KEvent.start_pos={};KEvent.end_pos={};KEvent.slideCall;KEvent.slideBegin=function(a){a=a.touches[0];KEvent.start_pos={x:Number(a.pageX),y:Number(a.pageY)}};KEvent.slideMove=function(a){a=a.touches[0];KEvent.end_pos={x:Number(a.pageX),y:Number(a.pageY)}};KEvent.slideEnd=function(a){a=KWhaleUtils.getRotationBy2Point(KEvent.start_pos,KEvent.end_pos);30<KWhaleUtils.distPoint(KEvent.start_pos,KEvent.end_pos)&&(45<=a&&135>a&&KEvent.slideCall("bot"),135<=a&&225>a&&KEvent.slideCall("left"),225<=a&&315>a&&KEvent.slideCall("top"),(315<=a&&360>=a||0<=a&&45>a)&&KEvent.slideCall("right"))};KEvent.ADDSLIDE=function(a){document.body.addEventListener("touchstart",KEvent.slideBegin,!1);document.body.addEventListener("touchmove",KEvent.slideMove,!1);document.body.addEventListener("touchend",KEvent.slideEnd,!1);KEvent.slideCall=a};KEvent.REMOVESLIDE=function(){document.body.removeEventListener("touchstart",KEvent.slideBegin,!1);document.body.removeEventListener("touchmove",KEvent.slideMove,!1);document.body.removeEventListener("touchend",KEvent.slideEnd,!1)};