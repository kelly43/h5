///<jscompress sourcefile="Shape.js" />
/**
 * Created by Keiling on 2016/3/4.
 *////<jscompress sourcefile="Spirte.js" />
/**
 * Created by Keiling on 2016/3/3.
 *////<jscompress sourcefile="Spirte_old.js" />
/**
 * Created by Keiling on 2016/3/3.
 *////<jscompress sourcefile="Stage.js" />
/**
 * Created by Administrator on 2016/1/10.
 *////<jscompress sourcefile="Text.js" />
/**
 * Created by Keiling on 2016/3/2.
 * get:anchorX=0,anchorY=1,不可设置
 * get:scale 不可设置
 *////<jscompress sourcefile="Utils.js" />
/**
 * Created by Administrator on 2016/1/11.
 * 工具模块
 *////<jscompress sourcefile="Bitmap.js" />
/**
 * Created by Administrator on 2016/1/10.
 * Class Name: 位图 纹理 类
 * Author: Keiling_J
 *////<jscompress sourcefile="BitmapFont.js" />
/**
 * Created by Keiling on 2016/6/22.
 *////<jscompress sourcefile="DisplayObject.js" />
/**
 * Created by Administrator on 2016/1/10.
 * Class Name: 显示对象 类 （显示对象基类）
 * Author: Keiling_J
 *////<jscompress sourcefile="Form.js" />
/**
 * Created by Keiling on 2016/3/4.
 *////<jscompress sourcefile="Hammerjs.js" />
/*! Hammer.JS - v2.0.8 - 2016-04-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license *////<jscompress sourcefile="InitKWahle.js" />
/**
初始化渲染
 *////<jscompress sourcefile="KEvent.js" />
/**
 * Created by Keiling on 2016/2/27.
 *////<jscompress sourcefile="KPhysical.js" />
/**
 * Created by Keiling on 2016/3/1.
 *////<jscompress sourcefile="KWhaleAnimate.js" />
/**
 * Created by Administrator on 2016/1/12.
 *////<jscompress sourcefile="Line.js" />
/**
 * Created by Keiling on 2016/2/27.
 *////<jscompress sourcefile="RES.js" />
/**
 * Created by Administrator on 2016/1/11.
 */var Shape=function(){function a(a,c,b,g){this.x=a.x;this.y=a.y;this.strokeColor=this.fillColor=g;this.lineWidth=1;this.type=0;this.width=c;this.height=b}function b(a,c,b){this.x=a.x;this.y=a.y;this.strokeColor=this.fillColor=b;this.lineWidth=1;this.type=0;this.r=c}function c(a,c,b,g){this.x=a.x;this.y=a.y;this.strokeColor=this.fillColor=b;this.lineWidth=4;this.angle=g;this.type=0;this.r=c}a.prototype=new DisplayObject;a.prototype.draw=function(a){var c=this.UseScale(),d=this.UseAnchor();switch(this.type){case 0:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((d.x+this.anchorX*c.width)/window.KWRatio,(d.y+this.anchorY*c.height)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.rect(-this.anchorX*c.width/window.KWRatio,-this.anchorY*c.height/window.KWRatio,c.width/window.KWRatio,c.height/window.KWRatio);a.fillStyle=this.fillColor;a.fill();a.restore();break;case 1:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((d.x+this.anchorX*c.width)/window.KWRatio,(d.y+this.anchorY*c.height)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.rect(-this.anchorX*c.width/window.KWRatio,-this.anchorY*c.height/window.KWRatio,c.width/window.KWRatio,c.height/window.KWRatio);a.strokeStyle=this.strokeColor;a.fillStyle=this.fillColor;a.lineWidth=this.lineWidth/window.KWRatio*this.scale;a.stroke();a.fill();a.restore();break;case 2:a.save(),a.beginPath(),a.globalAlpha=this.alpha,a.translate((d.x+this.anchorX*c.width)/window.KWRatio,(d.y+this.anchorY*c.height)/window.KWRatio),a.rotate(this.rotation*Math.PI/180),this.showMask(a),a.rect(-this.anchorX*c.width/window.KWRatio,-this.anchorY*c.height/window.KWRatio,c.width/window.KWRatio,c.height/window.KWRatio),a.strokeStyle=this.strokeColor,a.lineWidth=this.lineWidth/window.KWRatio*this.scale,a.fillStyle=this.fillColor,a.stroke(),a.restore()}};b.prototype=new DisplayObject;b.prototype.UseAnchor=function(){var a={x:0,y:0},c=this.UseScale();a.x=this.x-c.r*this.anchorX;a.y=this.y-c.r*this.anchorY;return a};b.prototype.UseScale=function(){var a={r:0};a.r=this.r*this.scale;return a};b.prototype.draw=function(a){var c=this.UseScale(),b=this.UseAnchor();switch(this.type){case 0:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.arc(0,0,this.r/window.KWRatio,0,2*Math.PI,!0);a.fillStyle=this.fillColor;a.fill();a.restore();break;case 1:a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.arc(0,0,this.r/window.KWRatio,0,2*Math.PI,!0);a.strokeStyle=this.strokeColor;a.lineWidth=this.lineWidth/window.KWRatio*this.scale;a.fillStyle=this.fillColor;a.stroke();a.fill();a.restore();break;case 2:a.save(),a.beginPath(),a.globalAlpha=this.alpha,a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio),a.rotate(this.rotation*Math.PI/180),this.showMask(a),a.arc(0,0,this.r/window.KWRatio,0,2*Math.PI,!0),a.strokeStyle=this.strokeColor,a.lineWidth=this.lineWidth/window.KWRatio*this.scale,a.fillStyle=this.fillColor,a.stroke(),a.restore()}};c.prototype=new DisplayObject;c.prototype.UseAnchor=function(){var a={x:0,y:0},c=this.UseScale();a.x=this.x-c.r*this.anchorX;a.y=this.y-c.r*this.anchorY;return a};c.prototype.UseScale=function(){var a={r:0};a.r=this.r*this.scale;return a};c.prototype.draw=function(a){var c=this.UseScale(),b=this.UseAnchor();a.save();a.beginPath();a.globalAlpha=this.alpha;a.translate((b.x+this.anchorX*c.r)/window.KWRatio,(b.y+this.anchorY*c.r)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);this.showMask(a);a.arc(0,0,this.r/window.KWRatio,0,this.angle/180*Math.PI,!1);a.lineWidth=this.lineWidth/window.KWRatio;a.lineCap="round";a.strokeStyle=this.fillColor;a.stroke();a.restore()};return{Rectangle:a,Circle:b,Arc:c}}();function Spirte(a,b){this.img=a.img;this.res=a.res;this.action=a.action;for(var c in a.res){this.width=a.res[c].w;this.height=a.res[c].h;this.proportion=this.width/this.height;break}this.curAction=b;this.countRate=this.curActionIndex=0;this.alpha=1;this.isplay=!0;this.isCall=this.isplayOne=!1;this.callFunc=null;this.clipImg()}Spirte.prototype=new DisplayObject;Spirte.prototype.clipImg=function(){this.clipImgSet={};for(var a in this.res){var b=document.createElement("canvas"),c=this.res[a];b.width=c.w/KWRatio;b.height=c.h/KWRatio;b.getContext("2d").drawImage(this.img,c.x,c.y,c.w,c.h,0,0,c.w,c.h);this.clipImgSet[a]=b}};Spirte.prototype.draw=function(a){var b=this.UseScale(),c=this.UseAnchor();a.save();a.globalAlpha=this.alpha;a.translate(Math.floor((c.x+this.anchorX*b.width)/window.KWRatio),Math.floor((c.y+this.anchorY*b.height)/window.KWRatio));a.rotate(this.rotation*Math.PI/180);c=this.action[this.curAction].frameRate;this.countRate++;var d;this.isplay?this.isplayOne?this.countRate>=60/c?(this.countRate=0,this.action[this.curAction].frames.length-1>this.curActionIndex?(d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]],this.curActionIndex++):this.action[this.curAction].frames.length-1==this.curActionIndex&&(this.isCall||(this.isCall=!0,this.curActionIndex=this.action[this.curAction].frames.length-1,this.callFunc&&this.callFunc()),this.isplay=this.isplayOne=!1,d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]])):d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]]:this.countRate>=60/c?(this.countRate=0,this.action[this.curAction].frames.length-1>this.curActionIndex?(d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]],this.curActionIndex++):(this.curActionIndex=0,d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]])):d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]]:d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]];d||(this.curActionIndex=0,d=this.clipImgSet[this.action[this.curAction].frames[this.curActionIndex]]);a.drawImage(d,-Math.floor(this.anchorX*b.width),-Math.floor(this.anchorY*b.height),Math.floor(b.width),Math.floor(b.height));a.restore()};Spirte.prototype.play=function(a){this.curAction=a;this.isplay=!0};Spirte.prototype.playOne=function(a){this.curAction=a;this.isplayOne=this.isplay=!0};Spirte.prototype.stop=function(){this.isplay=!1};Spirte.prototype.stopAt=function(a){this.stop();this.curActionIndex=a};function Spirte(a,b){this.img=a.img;this.res=a.res;this.action=a.action;for(items in a.res){this.width=a.res[items].w;this.height=a.res[items].h;this.proportion=this.width/this.height;break}this.curAction=b;this.countRate=this.curActionIndex=0;this.alpha=1;this.isplay=!0;this.isCall=this.isplayOne=!1;this.callFunc=null}Spirte.prototype=new DisplayObject;Spirte.prototype.draw=function(a){var b=this.UseScale(),c=this.UseAnchor();a.save();a.globalAlpha=this.alpha;a.translate((c.x+this.anchorX*b.width)/window.KWRatio,(c.y+this.anchorY*b.height)/window.KWRatio);a.rotate(this.rotation*Math.PI/180);c=this.action[this.curAction].frameRate;this.countRate++;var d;this.isplay?this.isplayOne?this.countRate>=60/c?(this.countRate=0,this.action[this.curAction].frames.length-1>this.curActionIndex?(d=this.res[this.action[this.curAction].frames[this.curActionIndex]],this.curActionIndex++):this.action[this.curAction].frames.length-1==this.curActionIndex&&(this.isCall||(this.isCall=!0,this.curActionIndex=this.action[this.curAction].frames.length-1,this.callFunc&&this.callFunc()),this.isplay=this.isplayOne=!1,d=this.res[this.action[this.curAction].frames[this.curActionIndex]])):d=this.res[this.action[this.curAction].frames[this.curActionIndex]]:this.countRate>=60/c?(this.countRate=0,this.action[this.curAction].frames.length-1>this.curActionIndex?(d=this.res[this.action[this.curAction].frames[this.curActionIndex]],this.curActionIndex++):(this.curActionIndex=0,d=this.res[this.action[this.curAction].frames[this.curActionIndex]])):d=this.res[this.action[this.curAction].frames[this.curActionIndex]]:d=this.res[this.action[this.curAction].frames[this.curActionIndex]];d||(this.curActionIndex=0,d=this.res[this.action[this.curAction].frames[this.curActionIndex]]);a.drawImage(this.img,d.x,d.y,d.w,d.h,-this.anchorX*b.width,-this.anchorY*b.height,b.width,b.height);a.restore()};Spirte.prototype.play=function(a){this.curAction=a;this.isplay=!0};Spirte.prototype.playOne=function(a){this.curAction=a;this.isplayOne=this.isplay=!0};Spirte.prototype.stop=function(){this.isplay=!1};Spirte.prototype.stopAt=function(a){this.stop();this.curActionIndex=a};function Stage(a){a.height=window.innerHeight||document.documentElement.clientHeight;a.width=window.innerWidth||document.documentElement.clientWidth;this.ctx=a.getContext("2d");this.isAction=!0;this.displayObjectSet=[];this.canvas=a;this.sw=a.width;this.sh=a.height;this.rateCount=this.rate=0}Stage.prototype.removeAllDisplayObject=function(){this.displayObjectSet=[]};Stage.prototype.worldDraw=function(){if(this.isAction&&(this.rateCount++,this.rateCount>=this.rate)){this.rateCount=0;this.canvas.width=this.canvas.width;for(var a=this.displayObjectSet,b=0,c=a.length;b<c;b++){var d=a[b];d.isAlive&&(0!=d.alpha&&d.draw(this.ctx),d.isAutoReflash&&d.evtObject.reflashAttribute())}a=KPhysical.PhysicalSet;if(0<a.length)for(b=0,c=a.length;0<c&&b<c;b++)a[b].runPhysical()}};Stage.DISPLAY_OBJECT_COUNT=0;Stage.prototype.addChild=function(a){a.z=Stage.DISPLAY_OBJECT_COUNT;Stage.DISPLAY_OBJECT_COUNT++;this.displayObjectSet.push(a)};Stage.prototype.removeChild=function(a){for(var b=this.displayObjectSet,c=0,d=b.length;c<d;c++)b[c]==a&&(this.displayObjectSet.splice(c,1),Stage.DISPLAY_OBJECT_COUNT--)};Stage.prototype.reflashZ=function(){for(var a=this.displayObjectSet,b=0,c=a.length;b<c;b++)for(var d=b+1,c=a.length;d<c;d++)if(a[b].z>a[d].z){var e=a[d];a[d]=a[b];a[b]=e}};var Stats=function(){function a(a,c,b){a=document.createElement(a);a.id=c;a.style.cssText=b;return a}function b(c,b,d){var e=a("div",c,"padding:0 0 3px 3px;text-align:left;background:"+d),f=a("div",c+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+b);f.innerHTML=c.toUpperCase();e.appendChild(f);c=a("div",c+"Graph","width:74px;height:30px;background:"+b);e.appendChild(c);for(b=0;74>b;b++)c.appendChild(a("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+d));return e}function c(a){for(var c=n.children,b=0;b<c.length;b++)c[b].style.display=b===a?"block":"none";k=a}function d(a,c){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*c)+"px"}var e=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,f=e(),g=f,h=0,k=0,n=a("div","stats","width:80px;opacity:0.9;cursor:pointer");n.addEventListener("mousedown",function(a){a.preventDefault();c(++k%n.children.length)},!1);var v=0,E=Infinity,A=0,r=b("fps","#0ff","#002"),J=r.children[0],F=r.children[1];n.appendChild(r);var B=0,C=Infinity,u=0,r=b("ms","#0f0","#020"),ia=r.children[0],m=r.children[1];n.appendChild(r);if(self.performance&&self.performance.memory){var t=0,Y=Infinity,V=0,r=b("mb","#f08","#201"),G=r.children[0],ja=r.children[1];n.appendChild(r)}c(k);return{REVISION:14,domElement:n,setMode:c,begin:function(){f=e()},end:function(){var a=e();B=a-f;C=Math.min(C,B);u=Math.max(u,B);ia.textContent=(B|0)+" MS ("+(C|0)+"-"+(u|0)+")";d(m,B/200);h++;if(a>g+1E3&&(v=Math.round(1E3*h/(a-g)),E=Math.min(E,v),A=Math.max(A,v),J.textContent=v+" FPS ("+E+"-"+A+")",d(F,v/100),g=a,h=0,void 0!==t)){var c=performance.memory.usedJSHeapSize,b=performance.memory.jsHeapSizeLimit;t=Math.round(9.54E-7*c);Y=Math.min(Y,t);V=Math.max(V,t);G.textContent=t+" MB ("+Y+"-"+V+")";d(ja,c/b)}return a},update:function(){f=this.end()}}};"object"===typeof module&&(module.exports=Stats);function Text(a,b,c,d){this.text=a;this.fontFamily=b;this.fontSize=c;this.color=d;this.ele=null;this.bold="";this.getRealSize()}Text.prototype=new DisplayObject;Text.prototype.getRealSize=function(){World.ISTEST&&console.log("Text is no suppor the attribute of 'anchor'and 'scale'");this.ele=document.createElement("span");this.ele.style.position="absolute";this.ele.style.backgroundColor="red";this.ele.style.fontFamily=this.fontFamily;this.ele.style.fontSize=this.fontSize/window.KWRatio+"px";this.ele.style.lineHeight=this.fontSize/window.KWRatio+"px";this.ele.innerHTML=this.text;document.body.appendChild(this.ele);this.width=this.ele.offsetWidth*window.KWRatio;this.height=this.ele.offsetHeight*window.KWRatio;document.body.removeChild(this.ele);this.ele=null};Text.prototype.UseAnchor=function(){var a={x:0,y:0};a.x=this.x;a.y=this.y;return a};Text.prototype.draw=function(a){var b,c;b=this.x;c=this.y;a.save();a.globalAlpha=this.alpha;a.translate(b/window.KWRatio,c/window.KWRatio);a.rotate(this.rotation*Math.PI/180);a.font=this.bold+" "+this.fontSize/window.KWRatio+"px "+this.fontFamily;a.fillStyle=this.color;a.fillText(this.text,0,0);a.restore()};void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var TWEEN=TWEEN||function(){var a=[];return{REVISION:"14",getAll:function(){return a},removeAll:function(){a=[]},add:function(b){a.push(b)},remove:function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)},update:function(b){if(0===a.length)return!1;var c=0;for(b=void 0!==b?b:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();c<a.length;)a[c].update(b)?c++:a.splice(c,1);return!0}}}();TWEEN.Tween=function(a){var b={},c={},d={},e=1E3,f=0,g=!1,h=!1,k=0,n=null,v=TWEEN.Easing.Linear.None,E=TWEEN.Interpolation.Linear,A=[],r=null,J=!1,F=null,B=null,C=null,u;for(u in a)b[u]=parseFloat(a[u],10);this.to=function(a,b){return void 0!==b&&(e=b),c=a,this};this.start=function(e){TWEEN.add(this);h=!0;J=!1;n=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();n+=k;for(var f in c){if(c[f]instanceof Array){if(0===c[f].length)continue;c[f]=[a[f]].concat(c[f])}b[f]=a[f];0==b[f]instanceof Array&&(b[f]*=1);d[f]=b[f]||0}return this};this.stop=function(){return h?(TWEEN.remove(this),h=!1,null!==C&&C.call(a),this.stopChainedTweens(),this):this};this.stopChainedTweens=function(){for(var a=0,c=A.length;c>a;a++)A[a].stop()};this.delay=function(a){return k=a,this};this.repeat=function(a){return f=a,this};this.yoyo=function(a){return g=a,this};this.easing=function(a){return v=a,this};this.interpolation=function(a){return E=a,this};this.chain=function(){return A=arguments,this};this.onStart=function(a){return r=a,this};this.onUpdate=function(a){return F=a,this};this.onComplete=function(a){return B=a,this};this.onStop=function(a){return C=a,this};this.update=function(h){var m;if(n>h)return!0;!1===J&&(null!==r&&r.call(a),J=!0);var t=(h-n)/e,t=1<t?1:t,u=v(t);for(m in c){var C=b[m]||0,G=c[m];G instanceof Array?a[m]=E(G,u):("string"==typeof G&&(G=C+parseFloat(G,10)),"number"==typeof G&&(a[m]=C+(G-C)*u))}if(null!==F&&F.call(a,u),1==t){if(0<f){isFinite(f)&&f--;for(m in d){if("string"==typeof c[m]&&(d[m]+=parseFloat(c[m],10)),g)t=d[m],d[m]=c[m],c[m]=t;b[m]=d[m]}return n=h+k,!0}null!==B&&B.call(a);m=0;for(t=A.length;t>m;m++)A[m].start(h);return!1}return!0}};TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*--a)*Math.sin(2*(a-b)*Math.PI/.4)))},Out:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/.4)+1)},InOut:function(a){var b,c=.1;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=.1):b=.4*Math.asin(1/c)/(2*Math.PI),1>(a*=2)?-.5*c*Math.pow(2,10*--a)*Math.sin(2*(a-b)*Math.PI/.4):c*Math.pow(2,-10*--a)*Math.sin(2*(a-b)*Math.PI/.4)*.5+1)}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*TWEEN.Easing.Bounce.In(2*a):.5*TWEEN.Easing.Bounce.Out(2*a-1)+.5}}};TWEEN.Interpolation={Linear:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),f=TWEEN.Interpolation.Utils.Linear;return 0>b?f(a[0],a[1],d):1<b?f(a[c],a[c-1],c-d):f(a[e],a[e+1>c?c:e+1],d-e)},Bezier:function(a,b){var c,d=0,e=a.length-1,f=Math.pow,g=TWEEN.Interpolation.Utils.Bernstein;for(c=0;e>=c;c++)d+=f(1-b,e-c)*f(b,c)*a[c]*g(e,c);return d},CatmullRom:function(a,b){var c=a.length-1,d=c*b,e=Math.floor(d),f=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>b&&(e=Math.floor(d=c*(1+b))),f(a[(e-1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],d-e)):0>b?a[0]-(f(a[0],a[0],a[1],a[1],-d)-a[0]):1<b?a[c]-(f(a[c],a[c],a[c-1],a[c-1],d-c)-a[c]):f(a[e?e-1:0],a[e],a[e+1>c?c:e+1],a[e+2>c?c:e+2],d-e)},Utils:{Linear:function(a,b,c){return(b-a)*c+a},Bernstein:function(a,b){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(b)/c(a-b)},Factorial:function(){var a=[1];return function(b){var c,d=1;if(a[b])return a[b];for(c=b;1<c;c--)d*=c;return a[b]=d}}(),CatmullRom:function(a,b,c,d,e){a=.5*(c-a);d=.5*(d-b);var f=e*e;return(2*b-2*c+a+d)*e*f+(-3*b+3*c-2*a-d)*f+a*e+b}}};"undefined"!=typeof module&&module.exports&&(module.exports=TWEEN);var KWhaleUtils=function(){return{getPageScroll:function(){return 0==document.body.scrollTop?document.documentElement.scrollTop:document.body.scrollTop},getScreenHeight:function(){return window.innerHeight||document.documentElement.clientHeight},Tween_YoYo:function(a,b,c,d,e){var f={},g;for(g in b)f[g]=a[g];b=(new TWEEN.Tween(a)).to(b,d).delay(c).easing(e);a=(new TWEEN.Tween(a)).to(f,d).delay(c).easing(e);b.chain(a);a.chain(b);return b},AddStageByScaleH:function(a,b,c){b.proportion&&(b.height=a.sh*c,b.width=b.height*b.proportion,b.width>a.sw&&(b.width=a.sw,b.height=b.width/b.proportion),a.addChild(b))},Tween_Loop:function(a,b,c,d,e){return(new TWEEN.Tween(a)).to(b,d).delay(c).repeat(Infinity).easing(e)},Tween:function(a,b,c,d,e){return(new TWEEN.Tween(a)).delay(c).to(b,d).easing(e)},AddStageByScaleHNoCheck:function(a,b,c){b.proportion&&(b.height=a.sh*c,b.width=b.height*b.proportion,a.addChild(b))},getRandomOne2Numer:function(a){return Math.abs(Math.ceil(Math.random()*a))},getPointByRotationAndPointAndLineWidth:function(a,b,c){return{x:Math.ceil(a.x+2*c*Math.cos(b/180*Math.PI)),y:Math.ceil(a.y+2*c*Math.sin(b/180*Math.PI))}},getRotationBy2Point:function(a,b){return 180*Math.atan2(a.y-b.y,a.x-b.x)/Math.PI+180},distPoint:function(a,b){return Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y))},addDomByScale:function(a,b,c,d,e){var f=document.createElement("div");f.style.position="absolute";"auto"!=b&&(f.style.height=a.sh*b/window.KWRatio+"px");"auto"!=c&&(f.style.width=a.sh*c/window.KWRatio+"px");f.style.top=a.sh*d/window.KWRatio+"px";f.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";f.innerHTML=e;document.body.appendChild(f);return f},getImgBySrcAndCall:function(a,b){var c=new Image;c.src=a;c.onload=function(){b(c)}},AddStageByScaleWNoCheck:function(a,b,c){b.proportion&&(b.width=a.sw*c,b.height=b.width/b.proportion,a.addChild(b))},getMask:function(a,b){var c=new Shape.Rectangle({x:0,y:0},(window.innerWidth||document.documentElement.clientWidth)*window.KWRatio,(window.innerHeight||document.documentElement.clientHeight)*window.KWRatio,a);c.alpha=b;return c},getBmpByName:function(a){a=new Bitmap(RES.getRES(a));a.anchorX=.5;return a},ReadyAddStageByScaleHNoCheck:function(a,b,c){b.proportion&&(b.height=a.sh*c,b.width=b.height*b.proportion)},playBmpSet:function(a,b,c,d,e){return{curRate:0,bmp:a,counts:c,name:b,index:1,rate:d,isend:!1,update:function(){this.isend||(this.curRate++,this.curRate==this.rate&&(this.curRate=0,this.index<this.counts?(this.bmp.img=RES.getRES(this.name+this.index),this.index++):(e(),this.isend=!0)))}}}}}();(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c,b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),h=window.setTimeout(function(){c(d+e)},e);a=d+e;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();function World(){}World.FPS=0;World.isShowFPS=!1;World.ISTEST=!1;World.STAT;World.init=function(){window.initKW()};World.Go=function(a){World.isShowFPS&&(World.STAT=new Stats,document.body.appendChild(World.STAT.domElement));(function c(){World.isShowFPS?(World.STAT.begin(),window.requestAnimationFrame(c),World.STAT.end()):window.requestAnimationFrame(c);a()})()};function Bitmap(a){this.tempImg=this.img=a;this.width=a.width;this.height=a.height;this.proportion=a.width/a.height;this.alpha=1;this.is3D=!1;this.z_3d=0;this.z_r=100;this.originImg=a;this.blurImg=null}Bitmap.prototype=new DisplayObject;Bitmap.prototype.blur=function(){if(this.blurImg)this.img=this.blurImg;else{var a=document.createElement("canvas");a.width=this.img.width/KWRatio;a.height=this.img.height/KWRatio;var b=a.getContext("2d");b.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.img.width,this.img.height);for(var c=b.getImageData(0,0,a.width,a.height),d=0;d<c.width;d++)for(var e=0;e<c.height;e++){var f=4*(d+e*c.width),g=c.data[f+3],h=.299*c.data[f+0]+.587*c.data[f+1]+.114*c.data[f+2];0!=g&&(c.data[f+0]=h,c.data[f+1]=h,c.data[f+2]=h,c.data[f+3]=g)}b.putImageData(c,0,0);this.img=this.blurImg=a}};Bitmap.prototype.focus=function(){this.img=this.originImg};Bitmap.prototype.draw=function(a){this.is3D&&(this.scale=Math.abs(this.z_r/(this.z_r-this.z_3d)));var b=this.UseScale(),c=this.UseAnchor(),d=this.img,e=this.rotation,f=this.anchorX,g=this.anchorY,h=this.alpha;a.save();var k=1;-1==this.scale&&(a.scale(-1,1),k=-1);1!=h&&(a.globalAlpha=h);a.translate((c.x*k+f*b.width*k)/window.KWRatio,(c.y+g*b.height)/window.KWRatio);1!=e&&a.rotate(e*Math.PI/180);this.showMask(a);a.drawImage(d,-f*b.width,-g*b.height,b.width,b.height);a.restore()};function BitmapFont(a,b){this.number=a||0;this.img=b.img;this.res=b.res;this.width=b.res["0"].w;this.height=b.res["0"].h;this.proportion=this.width/this.height}BitmapFont.prototype=new DisplayObject;BitmapFont.prototype.draw=function(a){for(var b=this.UseScale(),c=this.number+"",d=c.length,e=0;e<d;e++){a.save();a.globalAlpha=this.alpha;a.rotate(this.rotation*Math.PI/180);a.translate((this.x-this.anchorX*b.width*d)/window.KWRatio,(this.y-this.anchorY*b.height)/window.KWRatio);var f=this.res[c[e]];a.drawImage(this.img,f.x,f.y,f.w,f.h,b.width*e,0,b.width,b.height);a.restore()}};function DisplayObject(){this.anchorY=this.anchorX=this.height=this.width=this.y=this.x=0;this.scale=1;this.z=this.rotation=0;this.isAlive=!0;this.mask=this.evtObject=null}DisplayObject.prototype.showMask=function(a){this.mask&&("arc"==this.mask.type&&(a.beginPath(),this.mask.pos?a.arc(this.mask.pos.x/KWRatio,this.mask.pos.y/KWRatio,this.mask.r/window.KWRatio,0,2*Math.PI):a.arc(0,0,this.mask.r/window.KWRatio,0,2*Math.PI),a.closePath()),a.clip())};DisplayObject.prototype.draw=function(a){};DisplayObject.prototype.setZ=function(a,b){this.z=a;b.reflashZ()};DisplayObject.prototype.setAnchor=function(a){this.anchorY=this.anchorX=a};DisplayObject.prototype.UseAnchor=function(){var a={x:0,y:0},b=this.UseScale();a.x=this.x-b.width*this.anchorX;a.y=this.y-b.height*this.anchorY;return a};DisplayObject.prototype.setScale=function(a){this.scale=a};DisplayObject.prototype.UseScale=function(){var a={height:0,width:0};a.width=this.width*this.scale;a.height=this.height*this.scale;return a};DisplayObject.prototype.setH=function(a){this.height=a;this.proportion&&(this.width=this.height*this.proportion)};var Form=function(){function a(a){a.ele.style.width=a.width/window.KWRatio*a.scale+"px";a.ele.style.height=a.height/window.KWRatio*a.scale+"px";a.ele.style.top=(a.y-a.height*a.anchorY*a.scale)/window.KWRatio+"px";a.ele.style.left=(a.x-a.width*a.anchorX*a.scale)/window.KWRatio+"px";a.ele.style.opacity=a.alpha;a.ele.style.fontSize=a.height/window.KWRatio*a.scale*.7+"px";a.ele.style.lineHeight=a.height/window.KWRatio*a.scale+"px"}var b=function(a,c,b,d){this.normal_Text="";this.x=a;this.y=c;this.scale=this.alpha=1;this.anchorY=this.anchorX=0;this.width=b*this.scale;this.height=d*this.scale;this.ele=document.createElement("input");this.ele.type="text";this.ele.style.position="absolute";this.ele.style.width=this.width/window.KWRatio*this.scale+"px";this.ele.style.height=this.height/window.KWRatio*this.scale+"px";this.ele.style.top=(this.y-this.height*this.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.x-this.width*this.anchorX)/window.KWRatio+"px";this.ele.style.opacity=this.alpha;this.ele.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";this.ele.style.fontSize=this.height/8*2.4/window.KWRatio*this.scale+"px";this.ele.style.lineHeight=this.height/window.KWRatio*this.scale+"px";document.body.appendChild(this.ele);var e=this;this.ele.onblur=function(){""==e.ele.value&&(e.ele.value=e.normal_Text)};this.ele.onfocus=function(){e.ele.value==e.normal_Text&&(e.ele.value="")}};b.prototype.setNormalText=function(a){this.ele.placeholder=a};b.prototype.draw=function(c){a(this)};b.prototype.destroy=function(a){a&&a.removeChild(this);document.body.removeChild(this.ele)};b.prototype.getValue=function(){return this.ele.value};var c=function(a,c,b,d){this.normal_Text="";this.x=a;this.y=c;this.scale=this.alpha=1;this.anchorY=this.anchorX=0;this.width=b*this.scale;this.height=d*this.scale;this.ele=document.createElement("textarea");this.ele.style.position="absolute";this.ele.style.width=this.width/window.KWRatio*this.scale+"px";this.ele.style.height=this.height/window.KWRatio*this.scale+"px";this.ele.style.top=(this.y-this.height*this.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.x-this.width*this.anchorX)/window.KWRatio+"px";this.ele.style.opacity=this.alpha;this.ele.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";document.body.appendChild(this.ele);var e=this;this.ele.onblur=function(){""==e.ele.value&&(e.ele.value=e.normal_Text)};this.ele.onfocus=function(){e.ele.value==e.normal_Text&&(e.ele.value="")}};c.prototype.setFontSize=function(a){this.ele.style.fontSize=a/window.KWRatio*this.scale+"px"};c.prototype.setNormalText=function(a){this.normal_Text=a;this.ele.value=a};c.prototype.draw=function(c){a(this)};c.prototype.destroy=function(a){a&&a.removeChild(this);document.body.removeChild(this.ele)};c.prototype.getValue=function(){return this.ele.value};var d=function(a,c,b,d){this.x=a;this.y=c;this.scale=this.alpha=1;this.anchorY=this.anchorX=0;this.width=b*this.scale;this.height=d*this.scale;this.ele=document.createElement("select");this.ele.style.position="absolute";this.ele.style.width=this.width/window.KWRatio*this.scale+"px";this.ele.style.height=this.height/window.KWRatio*this.scale+"px";this.ele.style.top=(this.y-this.height*this.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.x-this.width*this.anchorX)/window.KWRatio+"px";this.ele.style.opacity=this.alpha;this.ele.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1";this.ele.style.fontSize=this.height/8*2.4/window.KWRatio*this.scale+"px";this.ele.style.lineHeight=this.height/window.KWRatio*this.scale+"px";document.body.appendChild(this.ele)};d.prototype.setItem=function(a){this.ele.innerHTML="";for(var c=0,b=a.length;c<b;c++){var d=document.createElement("option");d.text=a[c];this.ele.appendChild(d)}};d.prototype.draw=function(c){a(this)};d.prototype.destroy=function(a){a.removeChild(this);document.body.removeChild(this.ele)};return{Text:b,Select:d,Textarea:c}}();!function(a,b,c,d){function e(a,c,b){return setTimeout(n(a,b),c)}function f(a,c,b){return Array.isArray(a)?(g(a,b[c],b),!0):!1}function g(a,c,b){var e;if(a)if(a.forEach)a.forEach(c,b);else if(a.length!==d)for(e=0;e<a.length;)c.call(b,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&c.call(b,a[e],e,a)}function h(c,b,d){var e="DEPRECATED METHOD: "+b+"\n"+d+" AT \n";return function(){var b=Error("get-stack-trace"),b=b&&b.stack?b.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",d=a.console&&(a.console.warn||a.console.log);return d&&d.call(a.console,e,b),c.apply(this,arguments)}}function k(a,c,b){var d=c.prototype;c=a.prototype=Object.create(d);c.constructor=a;c._super=d;b&&L(c,b)}function n(a,c){return function(){return a.apply(c,arguments)}}function v(a,c){return typeof a==Sa?a.apply(c?c[0]||d:d,c):a}function E(a,c,b){g(J(c),function(c){a.addEventListener(c,b,!1)})}function A(a,c,b){g(J(c),function(c){a.removeEventListener(c,b,!1)})}function r(a,c){for(;a;){if(a==c)return!0;a=a.parentNode}return!1}function J(a){return a.trim().split(/\s+/g)}function F(a,c,b){if(a.indexOf&&!b)return a.indexOf(c);for(var d=0;d<a.length;){if(b&&a[d][b]==c||!b&&a[d]===c)return d;d++}return-1}function B(a){return Array.prototype.slice.call(a,0)}function C(a,c,b){for(var d=[],e=[],l=0;l<a.length;){var f=c?a[l][c]:a[l];0>F(e,f)&&d.push(a[l]);e[l]=f;l++}return b&&(d=c?d.sort(function(a,b){return a[c]>b[c]}):d.sort()),d}function u(a,c){for(var b,e,l=c[0].toUpperCase()+c.slice(1),f=0;f<Ea.length;){if(b=Ea[f],e=b?b+l:c,e in a)return e;f++}return d}function ia(c){c=c.ownerDocument||c;return c.defaultView||c.parentWindow||a}function m(a,c){var b=this;this.manager=a;this.callback=c;this.element=a.element;this.target=a.options.inputTarget;this.domHandler=function(c){v(a.options.enable,[a])&&b.handler(c)};this.init()}function t(a){var c=a.options.inputClass;return new (c?c:Ta?ta:Ua?ka:Fa?ua:ha)(a,Y)}function Y(a,c,b){var e,l,f=b.pointers.length;e=b.changedPointers.length;var q=c&w&&0===f-e,f=c&(p|D)&&0===f-e;b.isFirst=!!q;b.isFinal=!!f;q&&(a.session={});b.eventType=c;c=a.session;q=b.pointers;f=q.length;c.firstInput||(c.firstInput=V(b));1<f&&!c.firstMultiple?c.firstMultiple=V(b):1===f&&(c.firstMultiple=!1);e=c.firstInput;l=(f=c.firstMultiple)?f.center:e.center;var g=b.center=G(q);b.timeStamp=va();b.deltaTime=b.timeStamp-e.timeStamp;b.angle=sa(l,g);b.distance=ga(l,g);e=b.center;l=c.offsetDelta||{};var g=c.prevDelta||{},Q=c.prevInput||{};b.eventType!==w&&Q.eventType!==p||(g=c.prevDelta={x:Q.deltaX||0,y:Q.deltaY||0},l=c.offsetDelta={x:e.x,y:e.y});b.deltaX=g.x+(e.x-l.x);b.deltaY=g.y+(e.y-l.y);b.offsetDirection=ja(b.deltaX,b.deltaY);l=b.deltaTime;e=b.deltaX/l||0;l=b.deltaY/l||0;b.overallVelocityX=e;b.overallVelocityY=l;b.overallVelocity=R(e)>R(l)?e:l;f?(e=f.pointers,e=ga(q[0],q[1],la)/ga(e[0],e[1],la)):e=1;b.scale=e;f?(f=f.pointers,q=sa(q[1],q[0],la)+sa(f[1],f[0],la)):q=0;b.rotation=q;b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length;l=c.lastInterval||b;q=b.timeStamp-l.timeStamp;b.eventType!=D&&(q>Va||l.velocity===d)?(e=b.deltaX-l.deltaX,l=b.deltaY-l.deltaY,g=e/q||0,Q=l/q||0,q=g,f=Q,g=R(g)>R(Q)?g:Q,e=ja(e,l),c.lastInterval=b):(g=l.velocity,q=l.velocityX,f=l.velocityY,e=l.direction);b.velocity=g;b.velocityX=q;b.velocityY=f;b.direction=e;c=a.element;r(b.srcEvent.target,c)&&(c=b.srcEvent.target);b.target=c;a.emit("hammer.input",b);a.recognize(b);a.session.prevInput=b}function V(a){for(var c=[],b=0;b<a.pointers.length;)c[b]={clientX:W(a.pointers[b].clientX),clientY:W(a.pointers[b].clientY)},b++;return{timeStamp:va(),pointers:c,center:G(c),deltaX:a.deltaX,deltaY:a.deltaY}}function G(a){var c=a.length;if(1===c)return{x:W(a[0].clientX),y:W(a[0].clientY)};for(var b=0,d=0,e=0;c>e;)b+=a[e].clientX,d+=a[e].clientY,e++;return{x:W(b/c),y:W(d/c)}}function ja(a,c){return a===c?ma:R(a)>=R(c)?0>a?Z:aa:0>c?ba:ca}function ga(a,c,b){b||(b=Ga);var d=c[b[0]]-a[b[0]];a=c[b[1]]-a[b[1]];return Math.sqrt(d*d+a*a)}function sa(a,c,b){b||(b=Ga);return 180*Math.atan2(c[b[1]]-a[b[1]],c[b[0]]-a[b[0]])/Math.PI}function ha(){this.evEl=Wa;this.evWin=Xa;this.pressed=!1;m.apply(this,arguments)}function ta(){this.evEl=Ha;this.evWin=Ia;m.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function Da(){this.evTarget=Ya;this.evWin=Za;this.started=!1;m.apply(this,arguments)}function ka(){this.evTarget=$a;this.targetIds={};m.apply(this,arguments)}function ab(a,c){var b=B(a.touches),d=this.targetIds;if(c&(w|S)&&1===b.length)return d[b[0].identifier]=!0,[b,b];var e,f=B(a.changedTouches),l=[],g=this.target;if(e=b.filter(function(a){return r(a.target,g)}),c===w)for(b=0;b<e.length;)d[e[b].identifier]=!0,b++;for(b=0;b<f.length;)d[f[b].identifier]&&l.push(f[b]),c&(p|D)&&delete d[f[b].identifier],b++;return l.length?[C(e.concat(l),"identifier",!0),l]:void 0}function ua(){m.apply(this,arguments);var a=n(this.handler,this);this.touch=new ka(this.manager,a);this.mouse=new ha(this.manager,a);this.primaryTouch=null;this.lastTouches=[]}function Ja(a){a=a.changedPointers[0];if(a.identifier===this.primaryTouch){var c={x:a.clientX,y:a.clientY};this.lastTouches.push(c);var b=this.lastTouches;setTimeout(function(){var a=b.indexOf(c);-1<a&&b.splice(a,1)},bb)}}function wa(a,c){this.manager=a;this.set(c)}function cb(a){if(-1<a.indexOf(T))return T;var c=-1<a.indexOf(da),b=-1<a.indexOf(ea);return c&&b?T:c||b?c?da:ea:-1<a.indexOf(xa)?xa:Ka}function M(a){this.options=L({},this.defaults,a||{});this.id=db++;this.manager=null;a=this.options.enable;this.options.enable=a===d?!0:a;this.state=na;this.simultaneous={};this.requireFail=[]}function La(a){return a&fa?"cancel":a&P?"end":a&X?"move":a&H?"start":""}function Ma(a){return a==ca?"down":a==ba?"up":a==Z?"left":a==aa?"right":""}function oa(a,c){var b=c.manager;return b?b.get(a):a}function I(){M.apply(this,arguments)}function pa(){I.apply(this,arguments);this.pY=this.pX=null}function ya(){I.apply(this,arguments)}function za(){M.apply(this,arguments);this._input=this._timer=null}function Aa(){I.apply(this,arguments)}function Ba(){I.apply(this,arguments)}function qa(){M.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function N(a,c){c=c||{};var b=c.recognizers;return c.recognizers=b===d?N.defaults.preset:b,new Ca(a,c)}function Ca(a,c){this.options=L({},N.defaults,c||{});this.options.inputTarget=this.options.inputTarget||a;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=a;this.input=t(this);this.touchAction=new wa(this,this.options.touchAction);Na(this,!0);g(this.options.recognizers,function(a){var c=this.add(new a[0](a[1]));a[2]&&c.recognizeWith(a[2]);a[3]&&c.requireFailure(a[3])},this)}function Na(a,c){var b=a.element;if(b.style){var d;g(a.options.cssProps,function(e,f){d=u(b.style,f);c?(a.oldCssProps[d]=b.style[d],b.style[d]=e):b.style[d]=a.oldCssProps[d]||""});c||(a.oldCssProps={})}}function eb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0);d.gesture=c;c.target.dispatchEvent(d)}var L,Ea=" webkit Moz MS ms o".split(" "),fb=b.createElement("div"),Sa="function",W=Math.round,R=Math.abs,va=Date.now;L="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),b=1;b<arguments.length;b++){var e=arguments[b];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(c[f]=e[f])}return c}:Object.assign;var Oa=h(function(a,c,b){for(var e=Object.keys(c),f=0;f<e.length;)(!b||b&&a[e[f]]===d)&&(a[e[f]]=c[e[f]]),f++;return a},"extend","Use `assign`."),gb=h(function(a,c){return Oa(a,c,!0)},"merge","Use `assign`."),db=1,hb=/mobile|tablet|ip(ad|hone|od)|android/i,Fa="ontouchstart"in a,Ta=u(a,"PointerEvent")!==d,Ua=Fa&&hb.test(navigator.userAgent),Va=25,w=1,S=2,p=4,D=8,ma=1,Z=2,aa=4,ba=8,ca=16,K=Z|aa,U=ba|ca,Pa=K|U,Ga=["x","y"],la=["clientX","clientY"];m.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler);this.evTarget&&E(this.target,this.evTarget,this.domHandler);this.evWin&&E(ia(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler);this.evTarget&&A(this.target,this.evTarget,this.domHandler);this.evWin&&A(ia(this.element),this.evWin,this.domHandler)}};var ib={mousedown:w,mousemove:S,mouseup:p},Wa="mousedown",Xa="mousemove mouseup";k(ha,m,{handler:function(a){var c=ib[a.type];c&w&&0===a.button&&(this.pressed=!0);c&S&&1!==a.which&&(c=p);this.pressed&&(c&p&&(this.pressed=!1),this.callback(this.manager,c,{pointers:[a],changedPointers:[a],pointerType:"mouse",srcEvent:a}))}});var jb={pointerdown:w,pointermove:S,pointerup:p,pointercancel:D,pointerout:D},kb={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ha="pointerdown",Ia="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Ha="MSPointerDown",Ia="MSPointerMove MSPointerUp MSPointerCancel");k(ta,m,{handler:function(a){var c=this.store,b=!1,d=a.type.toLowerCase().replace("ms",""),d=jb[d],e=kb[a.pointerType]||a.pointerType,f="touch"==e,l=F(c,a.pointerId,"pointerId");d&w&&(0===a.button||f)?0>l&&(c.push(a),l=c.length-1):d&(p|D)&&(b=!0);0>l||(c[l]=a,this.callback(this.manager,d,{pointers:c,changedPointers:[a],pointerType:e,srcEvent:a}),b&&c.splice(l,1))}});var lb={touchstart:w,touchmove:S,touchend:p,touchcancel:D},Ya="touchstart",Za="touchstart touchmove touchend touchcancel";k(Da,m,{handler:function(a){var c=lb[a.type];if(c===w&&(this.started=!0),this.started){var b,d=B(a.touches);b=B(a.changedTouches);b=(c&(p|D)&&(d=C(d.concat(b),"identifier",!0)),[d,b]);c&(p|D)&&0===b[0].length-b[1].length&&(this.started=!1);this.callback(this.manager,c,{pointers:b[0],changedPointers:b[1],pointerType:"touch",srcEvent:a})}}});var mb={touchstart:w,touchmove:S,touchend:p,touchcancel:D},$a="touchstart touchmove touchend touchcancel";k(ka,m,{handler:function(a){var c=mb[a.type],b=ab.call(this,a,c);b&&this.callback(this.manager,c,{pointers:b[0],changedPointers:b[1],pointerType:"touch",srcEvent:a})}});var bb=2500;k(ua,m,{handler:function(a,c,b){var d="touch"==b.pointerType,e="mouse"==b.pointerType;if(!(e&&b.sourceCapabilities&&b.sourceCapabilities.firesTouchEvents)){if(d)c&w?(this.primaryTouch=b.changedPointers[0].identifier,Ja.call(this,b)):c&(p|D)&&Ja.call(this,b);else{if(d=e)a:{for(var d=b.srcEvent.clientX,e=b.srcEvent.clientY,f=0;f<this.lastTouches.length;f++){var l=this.lastTouches[f],g=Math.abs(e-l.y);if(25>=Math.abs(d-l.x)&&25>=g){d=!0;break a}}d=!1}if(d)return}this.callback(a,c,b)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var Qa=u(fb.style,"touchAction"),Ra=Qa!==d,Ka="auto",xa="manipulation",T="none",da="pan-x",ea="pan-y",ra=function(){if(!Ra)return!1;var c={},b=a.CSS&&a.CSS.supports;return"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(d){c[d]=b?a.CSS.supports("touch-action",d):!0}),c}();wa.prototype={set:function(a){"compute"==a&&(a=this.compute());Ra&&this.manager.element.style&&ra[a]&&(this.manager.element.style[Qa]=a);this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(c){v(c.options.enable,[c])&&(a=a.concat(c.getTouchAction()))}),cb(a.join(" "))},preventDefaults:function(a){var c=a.srcEvent,b=a.offsetDirection;if(this.manager.session.prevented)return void c.preventDefault();var d=this.actions,e=-1<d.indexOf(T)&&!ra[T],f=-1<d.indexOf(ea)&&!ra[ea],d=-1<d.indexOf(da)&&!ra[da];if(e){var l=2>a.distance,g=250>a.deltaTime;if(1===a.pointers.length&&l&&g)return}return d&&f?void 0:e||f&&b&K||d&&b&U?this.preventSrc(c):void 0},preventSrc:function(a){this.manager.session.prevented=!0;a.preventDefault()}};var na=1,H=2,X=4,P=8,O=P,fa=16;M.prototype={defaults:{},set:function(a){return L(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var c=this.simultaneous;return a=oa(a,this),c[a.id]||(c[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=oa(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var c=this.requireFail;return a=oa(a,this),-1===F(c,a)&&(c.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=oa(a,this);a=F(this.requireFail,a);return-1<a&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function c(c){b.manager.emit(c,a)}var b=this,d=this.state;P>d&&c(b.options.event+La(d));c(b.options.event);a.additionalEvent&&c(a.additionalEvent);d>=P&&c(b.options.event+La(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=32)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(32|na)))return!1;a++}return!0},recognize:function(a){a=L({},a);return v(this.options.enable,[this,a])?(this.state&(O|fa|32)&&(this.state=na),this.state=this.process(a),void(this.state&(H|X|P|fa)&&this.tryEmit(a))):(this.reset(),void(this.state=32))},process:function(a){},getTouchAction:function(){},reset:function(){}};k(I,M,{defaults:{pointers:1},attrTest:function(a){var c=this.options.pointers;return 0===c||a.pointers.length===c},process:function(a){var c=this.state,b=a.eventType,d=c&(H|X);a=this.attrTest(a);return d&&(b&D||!a)?c|fa:d||a?b&p?c|P:c&H?c|X:H:32}});k(pa,I,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,c=[];return a&K&&c.push(ea),a&U&&c.push(da),c},directionTest:function(a){var c=this.options,b=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&c.direction||(c.direction&K?(e=0===f?ma:0>f?Z:aa,b=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?ma:0>g?ba:ca,b=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,b&&d>c.threshold&&e&c.direction},attrTest:function(a){return I.prototype.attrTest.call(this,a)&&(this.state&H||!(this.state&H)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX;this.pY=a.deltaY;var c=Ma(a.direction);c&&(a.additionalEvent=this.options.event+c);this._super.emit.call(this,a)}});k(ya,I,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[T]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&H)},emit:function(a){1!==a.scale&&(a.additionalEvent=this.options.event+(1>a.scale?"in":"out"));this._super.emit.call(this,a)}});k(za,M,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ka]},process:function(a){var c=this.options,b=a.pointers.length===c.pointers,d=a.distance<c.threshold,f=a.deltaTime>c.time;if(this._input=a,!d||!b||a.eventType&(p|D)&&!f)this.reset();else if(a.eventType&w)this.reset(),this._timer=e(function(){this.state=O;this.tryEmit()},c.time,this);else if(a.eventType&p)return O;return 32},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===O&&(a&&a.eventType&p?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=va(),this.manager.emit(this.options.event,this._input)))}});k(Aa,I,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[T]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&H)}});k(Ba,I,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|U,pointers:1},getTouchAction:function(){return pa.prototype.getTouchAction.call(this)},attrTest:function(a){var c,b=this.options.direction;return b&(K|U)?c=a.overallVelocity:b&K?c=a.overallVelocityX:b&U&&(c=a.overallVelocityY),this._super.attrTest.call(this,a)&&b&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&R(c)>this.options.velocity&&a.eventType&p},emit:function(a){var c=Ma(a.offsetDirection);c&&this.manager.emit(this.options.event+c,a);this.manager.emit(this.options.event,a)}});k(qa,M,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xa]},process:function(a){var c=this.options,b=a.pointers.length===c.pointers,d=a.distance<c.threshold,f=a.deltaTime<c.time;if(this.reset(),a.eventType&w&&0===this.count)return this.failTimeout();if(d&&f&&b){if(a.eventType!=p)return this.failTimeout();b=this.pTime?a.timeStamp-this.pTime<c.interval:!0;d=!this.pCenter||ga(this.pCenter,a.center)<c.posThreshold;this.pTime=a.timeStamp;this.pCenter=a.center;d&&b?this.count+=1:this.count=1;this._input=a;if(0===this.count%c.taps)return this.hasRequireFailures()?(this._timer=e(function(){this.state=O;this.tryEmit()},c.interval,this),H):O}return 32},failTimeout:function(){return this._timer=e(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==O&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});N.VERSION="2.0.8";N.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Aa,{enable:!1}],[ya,{enable:!1},["rotate"]],[Ba,{direction:K}],[pa,{direction:K},["swipe"]],[qa],[qa,{event:"doubletap",taps:2},["tap"]],[za]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};Ca.prototype={set:function(a){return L(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?2:1},recognize:function(a){var c=this.session;if(!c.stopped){this.touchAction.preventDefaults(a);var b,d=this.recognizers,e=c.curRecognizer;(!e||e&&e.state&O)&&(e=c.curRecognizer=null);for(var f=0;f<d.length;)b=d[f],2===c.stopped||e&&b!=e&&!b.canRecognizeWith(e)?b.reset():b.recognize(a),!e&&b.state&(H|X|P)&&(e=c.curRecognizer=b),f++}},get:function(a){if(a instanceof M)return a;for(var c=this.recognizers,b=0;b<c.length;b++)if(c[b].options.event==a)return c[b];return null},add:function(a){if(f(a,"add",this))return this;var c=this.get(a.options.event);return c&&this.remove(c),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var c=this.recognizers;a=F(c,a);-1!==a&&(c.splice(a,1),this.touchAction.update())}return this},on:function(a,c){if(a!==d&&c!==d){var b=this.handlers;return g(J(a),function(a){b[a]=b[a]||[];b[a].push(c)}),this}},off:function(a,c){if(a!==d){var b=this.handlers;return g(J(a),function(a){c?b[a]&&b[a].splice(F(b[a],c),1):delete b[a]}),this}},emit:function(a,c){this.options.domEvents&&eb(a,c);var b=this.handlers[a]&&this.handlers[a].slice();if(b&&b.length){c.type=a;c.preventDefault=function(){c.srcEvent.preventDefault()};for(var d=0;d<b.length;)b[d](c),d++}},destroy:function(){this.element&&Na(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};L(N,{INPUT_START:w,INPUT_MOVE:S,INPUT_END:p,INPUT_CANCEL:D,STATE_POSSIBLE:na,STATE_BEGAN:H,STATE_CHANGED:X,STATE_ENDED:P,STATE_RECOGNIZED:O,STATE_CANCELLED:fa,STATE_FAILED:32,DIRECTION_NONE:ma,DIRECTION_LEFT:Z,DIRECTION_RIGHT:aa,DIRECTION_UP:ba,DIRECTION_DOWN:ca,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:U,DIRECTION_ALL:Pa,Manager:Ca,Input:m,TouchAction:wa,TouchInput:ka,MouseInput:ha,PointerEventInput:ta,TouchMouseInput:ua,SingleTouchInput:Da,Recognizer:M,AttrRecognizer:I,Tap:qa,Pan:pa,Swipe:Ba,Pinch:ya,Rotate:Aa,Press:za,on:E,off:A,each:g,merge:gb,extend:Oa,assign:L,inherit:k,bindFn:n,prefixed:u});("undefined"!=typeof a?a:"undefined"!=typeof self?self:{}).Hammer=N;"function"==typeof define&&define.amd?define(function(){return N}):"undefined"!=typeof module&&module.exports?module.exports=N:a[c]=N}(window,document,"Hammer");window.initKW=function(){try{(function(a){var b=function(a){var c;CanvasRenderingContext2D&&(c=document.createElement("canvas").getContext("2d").webkitBackingStorePixelRatio);return(window.devicePixelRatio||1)/(a.backingStorePixelRatio||c||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1)}(a);1!==b&&(function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}({fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all"},function(c,d){a[d]=function(a){return function(){var d,e,h=Array.prototype.slice.call(arguments);if("all"===c)h=h.map(function(a){return a*b});else if(Array.isArray(c))for(d=0,e=c.length;d<e;d++)h[c[d]]*=b;return a.apply(this,h)}}(a[d])}),a.stroke=function(a){return function(){this.lineWidth*=b;a.apply(this,arguments);this.lineWidth/=b}}(a.stroke),a.fillText=function(a){return function(){var c=Array.prototype.slice.call(arguments);c[1]*=b;c[2]*=b;this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c*b+d});a.apply(this,c);this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c/b+d})}}(a.fillText),a.strokeText=function(a){return function(){var c=Array.prototype.slice.call(arguments);c[1]*=b;c[2]*=b;this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c*b+d});a.apply(this,c);this.font=this.font.replace(/(\d+)(px|em|rem|pt)/g,function(a,c,d){return c/b+d})}}(a.strokeText),window.KWRatio=b)})(CanvasRenderingContext2D.prototype),function(a){a.getContext=function(a){return function(c){var b=a.call(this,c);"2d"===c&&(c=b.backingStorePixelRatio||b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,c=(window.devicePixelRatio||1)/c,1<c&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=c,this.height*=c));return b}}(a.getContext)}(HTMLCanvasElement.prototype),window.KWRatio||(window.KWRatio=1),document.body.style.overflow="hidden"}catch(a){}};function KBox2d(a,b,c,d){this.anchorY=this.anchorX=this.height=this.width=this.y=this.x=0;this.scale=1;this.z=this.rotation=0;this.isAlive=!0;this.evtObject=null;this.type=a;this.box=null;this.position=b;this.shape=c;this.disobj=d;this.init()}KBox2d.isDebug=!0;KBox2d.init=function(){var a=new Box2D.Common.Math.b2Vec2(0,9.8/KWRatio);KBox2d.scale=30;KBox2d.b2Vec2=Box2D.Common.Math.b2Vec2;KBox2d.b2BodyDef=Box2D.Dynamics.b2BodyDef;KBox2d.b2Body=Box2D.Dynamics.b2Body;KBox2d.b2FixtureDef=Box2D.Dynamics.b2FixtureDef;KBox2d.b2Fixture=Box2D.Dynamics.b2Fixture;KBox2d.b2World=Box2D.Dynamics.b2World;KBox2d.b2PolygonShape=Box2D.Collision.Shapes.b2PolygonShape;KBox2d.b2CircleShape=Box2D.Collision.Shapes.b2CircleShape;KBox2d.b2DebugDraw=Box2D.Dynamics.b2DebugDraw;KBox2d.b2RevoluteJointDef=Box2D.Dynamics.Joints.b2RevoluteJointDef;KBox2d.b2ContactListener=Box2D.Dynamics.b2ContactListener;KBox2d.world=new KBox2d.b2World(a,!0)};KBox2d.EVTNAME={BeginContact:"BeginContact",EndContact:"EndContact",PreSolve:"PreSolve",PostSolve:"PostSolve"};KBox2d.setListener=function(a,b){var c=new KBox2d.b2ContactListener;switch(a){case "BeginContact":c.BeginContact=b;break;case "EndContact":c.EndContact=b;break;case "PreSolve":c.PreSolve=b;break;case "PostSolve":c.PostSolve=b}KBox2d.world.SetContactListener(c);return c};KBox2d.setupDebugDraw=function(a){if(KBox2d.isDebug){var b=new KBox2d.b2DebugDraw;b.SetSprite(a);b.SetDrawScale(KBox2d.scale);b.SetFillAlpha(1);b.SetLineThickness(1);b.SetFlags(KBox2d.b2DebugDraw.e_shapeBit|KBox2d.b2DebugDraw.e_jointBit)}};KBox2d.worldAction=function(){var a=1/60;KBox2d.world.Step(a,6,3);setTimeout(KBox2d.worldAction,a)};KBox2d.prototype={init:function(){switch(this.type){case "floor":this.createFloor();break;case "rect":this.createRectBody();break;case "circle":this.createCircleBody()}},createFloor:function(){var a=new KBox2d.b2BodyDef;a.type=KBox2d.b2Body.b2_staticBody;a.position.x=this.position.x/KWRatio/KBox2d.scale;a.position.y=this.position.y/KWRatio/KBox2d.scale;var b=new KBox2d.b2FixtureDef;b.density=1;b.friction=3;b.restitution=.2;b.shape=new KBox2d.b2PolygonShape;b.shape.SetAsBox(this.shape.width/KWRatio/2/KBox2d.scale,this.shape.height/2/KWRatio/KBox2d.scale);a=KBox2d.world.CreateBody(a);b=a.CreateFixture(b);this.box={body:a,fixture:b};this.disobj&&(this.disobj.anchorX=this.disobj.anchorY=.5,this.disobj.width=this.shape.width,this.disobj.height=this.shape.height)},createRectBody:function(){var a=new KBox2d.b2BodyDef;a.type=KBox2d.b2Body.b2_dynamicBody;a.position.x=this.position.x/KWRatio/KBox2d.scale;a.position.y=this.position.y/KWRatio/KBox2d.scale;var b=new KBox2d.b2FixtureDef;b.density=1;b.friction=1.5;b.restitution=.4;b.shape=new KBox2d.b2PolygonShape;b.shape.SetAsBox(this.shape.width/KWRatio/KBox2d.scale,this.shape.height/KWRatio/KBox2d.scale);a=KBox2d.world.CreateBody(a);b=a.CreateFixture(b);this.box={body:a,fixture:b}},createCircleBody:function(){var a=new KBox2d.b2BodyDef;a.type=KBox2d.b2Body.b2_dynamicBody;a.position.x=this.position.x/KWRatio/KBox2d.scale;a.position.y=this.position.y/KWRatio/KBox2d.scale;var b=new KBox2d.b2FixtureDef;b.density=1;b.friction=3;b.restitution=.6;b.shape=new KBox2d.b2CircleShape(this.shape.r/KWRatio/KBox2d.scale);a=KBox2d.world.CreateBody(a);b=a.CreateFixture(b);this.box={body:a,fixture:b};this.disobj.anchorX=this.disobj.anchorY=.5;this.disobj.width=2*this.shape.r;this.disobj.height=2*this.shape.r},setPosY:function(a){this.box.body.SetPosition(new KBox2d.b2Vec2(this.position.x/KWRatio/KBox2d.scale,a/KWRatio/KBox2d.scale))},setPosX:function(a){this.box.body.SetPosition(new KBox2d.b2Vec2(a/KWRatio/KBox2d.scale,this.position.y/KWRatio/KBox2d.scale))},setPos:function(a,b){this.box.body.SetPosition(new KBox2d.b2Vec2(a/KWRatio/KBox2d.scale,b/KWRatio/KBox2d.scale))},getPos:function(){var a=this.box.body.GetPosition();return{x:a.x*KWRatio*KBox2d.scale,y:a.y*KWRatio*KBox2d.scale}},setSpeed:function(a,b){this.box.body.SetAwake(!0);b=b/KWRatio/KBox2d.scale;this.box.body.SetLinearVelocity(new KBox2d.b2Vec2(b*Math.cos(a/180*Math.PI),b*Math.sin(a/180*Math.PI)));this.box.body.SetAngle(a)},addToStage:function(a){a.addChild(this.disobj)},draw:function(){var a=this.box.body.GetPosition();this.disobj.x=a.x*KWRatio*KBox2d.scale;this.disobj.y=a.y*KWRatio*KBox2d.scale;this.disobj.rotation=180*this.box.body.GetAngle()}};function KEvent(a,b,c){a.evtObject=this;a.isAutoReflash=!1;this.disobj=a;this.isDestory=!1;this.isAutoFreshAfterEvent=!0;this.ele=document.createElement("div");this.ele.style.position="absolute";this.ele.style.top=(this.disobj.y-this.disobj.height*this.disobj.anchorY)/window.KWRatio+"px";this.ele.style.left=(this.disobj.x-this.disobj.width*this.disobj.anchorX)/window.KWRatio+"px";World.ISTEST&&(this.ele.style.backgroundColor="blue",this.ele.style.opacity="0.5");this.ele.style.width=this.disobj.width*this.disobj.scale/window.KWRatio+"px";this.ele.style.height=this.disobj.height*this.disobj.scale/window.KWRatio+"px";document.body.appendChild(this.ele);this.times=b.times||null;KEvent.EventSet.push(this.ele);switch(b.type){case "click":this.CLICK(c);break;case "touchstart":this.TOUCHBEGIN(c);break;case "touchend":this.TOUCHEND(c);break;case "touchmove":this.TOUCHMOVE(c);break;case "touchstartandmove":this.TOUCHBEGINANDMOVE(c);break;case "touchout":this.TOUCHOUT(c)}}KEvent.EventSet=[];KEvent.ISTouches=!1;KEvent.Remove=function(a){for(var b=0,c=KEvent.EventSet.length;b<c;b++)KEvent.EventSet[b]==a&&(KEvent.EventSet.splice(b,1),c=KEvent.EventSet.length)};KEvent.RemoveAllEventObj=function(a){for(var b=0,c=KEvent.EventSet.length;b<c;b++)a=KEvent.EventSet[b],document.body.removeChild(a);KEvent.EventSet=[]};KEvent.prototype.TOUCHBEGIN=function(a){var b=this;this.ele.addEventListener("touchstart",function(c){!KEvent.ISTouches&&1<c.touches.length||(c.preventDefault(),a(c),b.reflashAttribute())},!1);World.ISTEST&&this.ele.addEventListener("mousedown",function(c){a(c);b.reflashAttribute()},!0)};KEvent.prototype.CLICK=function(a){var b=this;this.ele.addEventListener("click",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHEND=function(a){var b=this;this.ele.addEventListener("touchend",function(c){!KEvent.ISTouches&&1<c.touches.length||(c.preventDefault(),a(c),b.reflashAttribute())},!1);World.ISTEST&&this.ele.addEventListener("mouseup",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHMOVE=function(a){var b=this;this.ele.addEventListener("touchmove",function(c){!KEvent.ISTouches&&1<c.touches.length||(c.preventDefault(),a(c),b.reflashAttribute())},!1);World.ISTEST&&this.ele.addEventListener("mousemove",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHOUT=function(a){var b=this;this.ele.addEventListener("touchout",function(c){!KEvent.ISTouches&&1<c.touches.length||(c.preventDefault(),a(c),b.reflashAttribute())},!1);World.ISTEST&&this.ele.addEventListener("mouseout",function(c){c.preventDefault();a(c);b.reflashAttribute()},!1)};KEvent.prototype.TOUCHBEGINANDMOVE=function(a){var b=this,c=!1,d,e;this.TOUCHBEGIN(function(){c=!0;d=b.disobj.x;e=b.disobj.y;a[0]()});this.TOUCHEND(function(f){c=!1;d=b.disobj.x;e=b.disobj.y;a[2]()});this.TOUCHMOVE(function(b){if(c){var f=Number(b.clientY)-e;b.sx=Number(b.clientX)-d;b.sy=f;a[1](b)}});this.TOUCHOUT(function(f){c&&(c=!1,d=b.disobj.x,e=b.disobj.y,a[2]())})};KEvent.shakeCall;var SHAKE_THRESHOLD=1E3,last_update=0,x=y=z=last_x=last_y=last_z=0;KEvent.deviceMotionHandler=function(a){a=a.accelerationIncludingGravity;var b=(new Date).getTime();if(100<b-last_update){var c=b-last_update;last_update=b;x=a.x;y=a.y;z=a.z;Math.abs(x+y+z-last_x-last_y-last_z)/c*1E4>SHAKE_THRESHOLD&&KEvent.shakeCall(x,y);last_x=x;last_y=y;last_z=z}};KEvent.ADDSHAKE=function(a){KEvent.shakeCall=a;window.DeviceMotionEvent?window.addEventListener("devicemotion",KEvent.deviceMotionHandler,!1):alert("\u60a8\u597d\uff0c\u4f60\u76ee\u524d\u6240\u7528\u7684\u8bbe\u7f6e\u597d\u50cf\u4e0d\u652f\u6301\u91cd\u529b\u611f\u5e94\u54e6\uff01")};KEvent.REMOVESHAKE=function(){window.removeEventListener("devicemotion",KEvent.deviceMotionHandler,!1)};KEvent.prototype.destory=function(){this.isDestory||(this.isDestory=!0,document.body.removeChild(this.ele),KEvent.Remove(this.ele))};KEvent.prototype.reAdd=function(){this.isDestory&&(this.isDestory=!1,document.body.appendChild(this.ele),KEvent.EventSet.push(this.ele))};KEvent.prototype.reflashAttribute=function(){this.isAutoFreshAfterEvent&&(this.ele.style.position="absolute",this.ele.style.top=(this.disobj.y-this.disobj.height*this.disobj.scale*this.disobj.anchorY)/window.KWRatio+"px",this.ele.style.left=(this.disobj.x-this.disobj.width*this.disobj.scale*this.disobj.anchorX)/window.KWRatio+"px",this.ele.style.width=this.disobj.width*this.disobj.scale/window.KWRatio+"px",this.ele.style.height=this.disobj.height*this.disobj.scale/window.KWRatio+"px")};KEvent.start_pos={};KEvent.end_pos={};KEvent.slideCall;KEvent.slideBegin=function(a){a=a.touches[0];KEvent.start_pos={x:Number(a.pageX),y:Number(a.pageY)}};KEvent.slideMove=function(a){a=a.touches[0];KEvent.end_pos={x:Number(a.pageX),y:Number(a.pageY)}};KEvent.slideEnd=function(a){a=KWhaleUtils.getRotationBy2Point(KEvent.start_pos,KEvent.end_pos);30<KWhaleUtils.distPoint(KEvent.start_pos,KEvent.end_pos)&&(45<=a&&135>a&&KEvent.slideCall("bot"),135<=a&&225>a&&KEvent.slideCall("left"),225<=a&&315>a&&KEvent.slideCall("top"),(315<=a&&360>=a||0<=a&&45>a)&&KEvent.slideCall("right"))};KEvent.ADDSLIDE=function(a){document.body.addEventListener("touchstart",KEvent.slideBegin,!1);document.body.addEventListener("touchmove",KEvent.slideMove,!1);document.body.addEventListener("touchend",KEvent.slideEnd,!1);KEvent.slideCall=a};KEvent.REMOVESLIDE=function(){document.body.removeEventListener("touchstart",KEvent.slideBegin,!1);document.body.removeEventListener("touchmove",KEvent.slideMove,!1);document.body.removeEventListener("touchend",KEvent.slideEnd,!1)};function KPhysical(a,b){this.physicalObject=b;this.displayObject=a;KPhysical.PhysicalSet.push(this)}KPhysical.PhysicalSet=[];KPhysical.prototype.runPhysical=function(){if(this.physicalObject.revolution.isRun){var a=2*this.physicalObject.revolution.r*Math.sin(this.physicalObject.revolution.angle/180*Math.PI);this.displayObject.x=2*this.physicalObject.revolution.r*Math.cos(this.physicalObject.revolution.angle/180*Math.PI)+this.physicalObject.revolution.rotationPoint.x;this.displayObject.y=a+this.physicalObject.revolution.rotationPoint.y;360==this.physicalObject.revolution.angle&&(this.physicalObject.revolution.angle=360);this.physicalObject.revolution.angle+=.2}};KPhysical.stopPhysicalObjctByDisplayObject=function(a){for(var b=0,c=KPhysical.PhysicalSet.length;b<c;b++)KPhysical.PhysicalSet[b].displayObject==a&&(KPhysical.PhysicalSet[b].physicalObject.revolution.isRun=!1)};function KWhaleAnimate(a){KWhaleAnimate.KWHAHLE_ANIMATE_SET.push(this);this._isRotationY=this.isUpdateAnimate=!1;this._rotationY_obj={};this.stage=a}KWhaleAnimate.KWHAHLE_ANIMATE_SET=[];KWhaleAnimate.update=function(){for(var a=KWhaleAnimate.KWHAHLE_ANIMATE_SET,b=0,c=a.length;b<c;b++)a[b].isUpdateAnimate&&a[b]._isRotationY&&(a[b]._rotationY(),console.log("j"))};KWhaleAnimate.prototype.start=function(){this.isUpdateAnimate=!0};KWhaleAnimate.prototype.stop=function(){this.isUpdateAnimate=!1};KWhaleAnimate.prototype.startRotationY=function(){this._isRotationY=!0};KWhaleAnimate.prototype.stopRotationY=function(){this._isRotationY=!1};KWhaleAnimate.prototype.removeRotationY=function(){this.stopRotationY();this._rotationY_obj={}};KWhaleAnimate.prototype.rotationY=function(a,b,c,d,e){this._rotationY_obj={objArr:a,stage:this.stage,r:b,MaxScale:e,rx:c,ry:d}};KWhaleAnimate.prototype._rotationY=function(){for(var a=this._rotationY_obj.rx,b=this._rotationY_obj.ry,c=this._rotationY_obj.objArr,d=this._rotationY_obj.r,e=this._rotationY_obj.MaxScale,f=0,g=c.length;f<g;f++)c[f].x=a+Math.sin(c[f].speed*Math.PI/180)*d,c[f].y=b-Math.cos(c[f].speed*Math.PI/180)*d/10,c[f].z_3d=0+Math.cos(c[f].speed*Math.PI/180)*d,c[f].speed+=.1,c[f].scale=Math.abs(d/(d-c[f].z_3d))>e?e:Math.abs(d/(d-c[f].z_3d)),c[f].z=c[f].z_3d};function Line(a,b,c,d,e){var f=function(a){var c={};for(i in a)c[i]=a[i];return c};void 0==e?(this.startObj=f(a),this.endObj=f(b)):(this.startObj=a,this.endObj=b);this.color=c;this.lineWidth=d;this.alpha=1}Line.prototype=new DisplayObject;Line.prototype.draw=function(a){1!=this.alpha&&(a.globalAlpha=this.alpha);a.beginPath();a.lineWidth=this.lineWidth;a.lineCap="round";a.lineJoin="round";a.strokeStyle=this.color;a.moveTo(this.startObj.x/window.KWRatio,this.startObj.y/window.KWRatio);a.lineTo(this.endObj.x/window.KWRatio,this.endObj.y/window.KWRatio);a.stroke()};this.createjs=this.createjs||{};(function(){var a=createjs.SoundJS=createjs.SoundJS||{};a.version="NEXT";a.buildDate="Fri, 04 Dec 2015 17:24:04 GMT"})();this.createjs=this.createjs||{};createjs.extend=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype;return a.prototype=new c};this.createjs=this.createjs||{};createjs.promote=function(a,b){var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d)c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}return a};this.createjs=this.createjs||{};createjs.indexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return c;return-1};this.createjs=this.createjs||{};(function(){createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}})();this.createjs=this.createjs||{};(function(){function a(){throw"BrowserDetect cannot be instantiated";}var b=a.agent=window.navigator.userAgent;a.isWindowPhone=-1<b.indexOf("IEMobile")||-1<b.indexOf("Windows Phone");a.isFirefox=-1<b.indexOf("Firefox");a.isOpera=null!=window.opera;a.isChrome=-1<b.indexOf("Chrome");a.isIOS=(-1<b.indexOf("iPod")||-1<b.indexOf("iPhone")||-1<b.indexOf("iPad"))&&!a.isWindowPhone;a.isAndroid=-1<b.indexOf("Android")&&!a.isWindowPhone;a.isBlackberry=-1<b.indexOf("Blackberry");createjs.BrowserDetect=a})();this.createjs=this.createjs||{};(function(){function a(){this._captureListeners=this._listeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener;a.on=b.on;a.removeEventListener=a.off=b.removeEventListener;a.removeAllEventListeners=b.removeAllEventListeners;a.hasEventListener=b.hasEventListener;a.dispatchEvent=b.dispatchEvent;a._dispatchEvent=b._dispatchEvent;a.willTrigger=b.willTrigger};b.addEventListener=function(a,b,e){var c;c=e?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var d=c[a];d&&this.removeEventListener(a,b,e);(d=c[a])?d.push(b):c[a]=[b];return b};b.on=function(a,b,e,f,g,h){b.handleEvent&&(e=e||b,b=b.handleEvent);e=e||this;return this.addEventListener(a,function(a){b.call(e,a,g);f&&a.remove()},h)};b.removeEventListener=function(a,b,e){if(e=e?this._captureListeners:this._listeners){var c=e[a];if(c)for(var d=0,h=c.length;d<h;d++)if(c[d]==b){1==h?delete e[a]:c.splice(d,1);break}}};b.off=b.removeEventListener;b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null};b.dispatchEvent=function(a,b,e){if("string"==typeof a){var c=this._listeners;if(!(b||c&&c[a]))return!0;a=new createjs.Event(a,b,e)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(g){}if(a.bubbles&&this.parent){e=this;for(b=[e];e.parent;)b.push(e=e.parent);c=b.length;for(e=c-1;0<=e&&!a.propagationStopped;e--)b[e]._dispatchEvent(a,1+(0==e));for(e=1;e<c&&!a.propagationStopped;e++)b[e]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented};b.hasEventListener=function(a){var c=this._listeners,b=this._captureListeners;return!!(c&&c[a]||b&&b[a])};b.willTrigger=function(a){for(var c=this;c;){if(c.hasEventListener(a))return!0;c=c.parent}return!1};b.toString=function(){return"[EventDispatcher]"};b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d&&(d=d[a.type])&&(c=d.length)){try{a.currentTarget=this}catch(k){}try{a.eventPhase=b}catch(k){}a.removed=!1;for(var d=d.slice(),g=0;g<c&&!a.immediatePropagationStopped;g++){var h=d[g];h.handleEvent?h.handleEvent(a):h(a);a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};(function(){function a(a,b,e){this.type=a;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!b;this.cancelable=!!e;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};b.stopPropagation=function(){this.propagationStopped=!0};b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0};b.remove=function(){this.removed=!0};b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};b.set=function(a){for(var c in a)this[c]=a[c];return this};b.toString=function(){return"[Event (type\x3d"+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};(function(){function a(a,c,d){this.Event_constructor("error");this.title=a;this.message=c;this.data=d}createjs.extend(a,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)};createjs.ErrorEvent=createjs.promote(a,"Event")})();this.createjs=this.createjs||{};(function(a){function b(a,b){this.Event_constructor("progress");this.loaded=a;this.total=null==b?1:b;this.progress=0==b?0:this.loaded/this.total}createjs.extend(b,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)};createjs.ProgressEvent=createjs.promote(b,"Event")})(window);this.createjs=this.createjs||{};(function(){function a(){this.id=this.type=this.src=null;this.maintainOrder=!1;this.data=this.callback=null;this.method=createjs.LoadItem.GET;this.headers=this.values=null;this.withCredentials=!1;this.crossOrigin=this.mimeType=null;this.loadTimeout=c.LOAD_TIMEOUT_DEFAULT}var b=a.prototype={},c=a;c.LOAD_TIMEOUT_DEFAULT=8E3;c.create=function(b){if("string"==typeof b){var d=new a;d.src=b;return d}if(b instanceof c)return b;if(b instanceof Object&&b.src)return null==b.loadTimeout&&(b.loadTimeout=c.LOAD_TIMEOUT_DEFAULT),b;throw Error("Type not recognized.");};b.set=function(a){for(var c in a)this[c]=a[c];return this};createjs.LoadItem=c})();(function(){var a={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(b){var c={absolute:!1,relative:!1};if(null==b)return c;var d=b.indexOf("?");-1<d&&(b=b.substr(0,d));a.ABSOLUTE_PATT.test(b)?c.absolute=!0:a.RELATIVE_PATT.test(b)&&(c.relative=!0);if(b=b.match(a.EXTENSION_PATT))c.extension=b[1].toLowerCase();return c},formatQueryString:function(a,c){if(null==a)throw Error("You must specify data.");var b=[],e;for(e in a)b.push(e+"\x3d"+escape(a[e]));c&&(b=b.concat(c));return b.join("\x26")},buildPath:function(a,c){if(null==c)return a;var b=[],e=a.indexOf("?");if(-1!=e)var f=a.slice(e+1),b=b.concat(f.split("\x26"));return-1!=e?a.slice(0,e)+"?"+this.formatQueryString(c,b):a+"?"+this.formatQueryString(c,b)},isCrossDomain:function(a){var c=document.createElement("a");c.href=a.src;a=document.createElement("a");a.href=location.href;return""!=c.hostname&&(c.port!=a.port||c.protocol!=a.protocol||c.hostname!=a.hostname)},isLocal:function(a){var c=document.createElement("a");c.href=a.src;return""==c.hostname&&"file:"==c.protocol},isBinary:function(a){switch(a){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(a){return a instanceof HTMLImageElement},isAudioTag:function(a){return window.HTMLAudioElement?a instanceof HTMLAudioElement:!1},isVideoTag:function(a){return window.HTMLVideoElement?a instanceof HTMLVideoElement:!1},isText:function(a){switch(a){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(a){if(null==a)return createjs.AbstractLoader.TEXT;switch(a.toLowerCase()){case "jpeg":case "jpg":case "gif":case "png":case "webp":case "bmp":return createjs.AbstractLoader.IMAGE;case "ogg":case "mp3":case "webm":return createjs.AbstractLoader.SOUND;case "mp4":case "webm":case "ts":return createjs.AbstractLoader.VIDEO;case "json":return createjs.AbstractLoader.JSON;case "xml":return createjs.AbstractLoader.XML;case "css":return createjs.AbstractLoader.CSS;case "js":return createjs.AbstractLoader.JAVASCRIPT;case "svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=a})();this.createjs=this.createjs||{};(function(){function a(a,b,e){this.EventDispatcher_constructor();this.canceled=this.loaded=!1;this.progress=0;this.type=e;this.resultFormatter=null;this._item=a?createjs.LoadItem.create(a):null;this._preferXHR=b;this._tag=this._tagSrcAttribute=this._loadedItems=this._rawResult=this._result=null}var b=createjs.extend(a,createjs.EventDispatcher);a.POST="POST";a.GET="GET";a.BINARY="binary";a.CSS="css";a.IMAGE="image";a.JAVASCRIPT="javascript";a.JSON="json";a.JSONP="jsonp";a.MANIFEST="manifest";a.SOUND="sound";a.VIDEO="video";a.SPRITESHEET="spritesheet";a.SVG="svg";a.TEXT="text";a.XML="xml";b.getItem=function(){return this._item};b.getResult=function(a){return a?this._rawResult:this._result};b.getTag=function(){return this._tag};b.setTag=function(a){this._tag=a};b.load=function(){this._createRequest();this._request.on("complete",this,this);this._request.on("progress",this,this);this._request.on("loadStart",this,this);this._request.on("abort",this,this);this._request.on("timeout",this,this);this._request.on("error",this,this);var a=new createjs.Event("initialize");a.loader=this._request;this.dispatchEvent(a);this._request.load()};b.cancel=function(){this.canceled=!0;this.destroy()};b.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy());this._loadItems=this._result=this._rawResult=this._item=this._request=null;this.removeAllEventListeners()};b.getLoadedItems=function(){return this._loadedItems};b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)};b._createTag=function(a){return null};b._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")};b._sendProgress=function(a){if(!this._isCanceled()){var c=null;if("number"==typeof a)this.progress=a,c=new createjs.ProgressEvent(this.progress);else if(c=a,this.progress=a.loaded/a.total,c.progress=this.progress,isNaN(this.progress)||Infinity==this.progress)this.progress=0;this.hasEventListener("progress")&&this.dispatchEvent(c)}};b._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var a=new createjs.Event("complete");a.rawResult=this._rawResult;null!=this._result&&(a.result=this._result);this.dispatchEvent(a)}};b._sendError=function(a){!this._isCanceled()&&this.hasEventListener("error")&&(null==a&&(a=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(a))};b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1};b.resultFormatter=null;b.handleEvent=function(a){switch(a.type){case "complete":this._rawResult=a.target._response;a=this.resultFormatter&&this.resultFormatter(this);a instanceof Function?a.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=a||this._rawResult,this._sendComplete());break;case "progress":this._sendProgress(a);break;case "error":this._sendError(a);break;case "loadstart":this._sendLoadStart();break;case "abort":case "timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+a.type.toUpperCase()+"_ERROR"))}};b._resultFormatSuccess=function(a){this._result=a;this._sendComplete()};b._resultFormatFailed=function(a){this._sendError(a)};b.buildPath=function(a,b){return createjs.RequestUtils.buildPath(a,b)};b.toString=function(){return"[PreloadJS AbstractLoader]"};createjs.AbstractLoader=createjs.promote(a,"EventDispatcher")})();this.createjs=this.createjs||{};(function(){function a(a,b,e){this.AbstractLoader_constructor(a,b,e);this.resultFormatter=this._formatResult;this._tagSrcAttribute="src";this.on("initialize",this._updateXHR,this)}var b=createjs.extend(a,createjs.AbstractLoader);b.load=function(){this._tag||(this._tag=this._createTag(this._item.src));this._tag.preload="auto";this._tag.load();this.AbstractLoader_load()};b._createTag=function(){};b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)};b._updateXHR=function(a){a.loader.setResponseType&&a.loader.setResponseType("blob")};b._formatResult=function(a){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler);this._tag.onstalled=null;if(this._preferXHR){var c=window.URL||window.webkitURL,b=a.getResult(!0);a.getTag().src=c.createObjectURL(b)}return a.getTag()};createjs.AbstractMediaLoader=createjs.promote(a,"AbstractLoader")})();this.createjs=this.createjs||{};(function(){var a=function(a){this._item=a},b=createjs.extend(a,createjs.EventDispatcher);b.load=function(){};b.destroy=function(){};b.cancel=function(){};createjs.AbstractRequest=createjs.promote(a,"EventDispatcher")})();this.createjs=this.createjs||{};(function(){function a(a,b,e){this.AbstractRequest_constructor(a);this._tag=b;this._tagSrcAttribute=e;this._loadedHandler=createjs.proxy(this._handleTagComplete,this);this._addedToDOM=!1;this._startTagVisibility=null}var b=createjs.extend(a,createjs.AbstractRequest);b.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this);this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);this._tag.onerror=createjs.proxy(this._handleError,this);var a=new createjs.Event("initialize");a.loader=this._tag;this.dispatchEvent(a);this._hideTag();this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout);this._tag[this._tagSrcAttribute]=this._item.src;null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)};b.destroy=function(){this._clean();this._tag=null;this.AbstractRequest_destroy()};b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;"loaded"!=a.readyState&&"complete"!=a.readyState||this._handleTagComplete()};b._handleError=function(){this._clean();this.dispatchEvent("error")};b._handleTagComplete=function(){this._rawResult=this._tag;this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult;this._clean();this._showTag();this.dispatchEvent("complete")};b._handleTimeout=function(){this._clean();this.dispatchEvent(new createjs.Event("timeout"))};b._clean=function(){this._tag.onload=null;this._tag.onreadystatechange=null;this._tag.onerror=null;this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag);clearTimeout(this._loadTimeout)};b._hideTag=function(){this._startTagVisibility=this._tag.style.visibility;this._tag.style.visibility="hidden"};b._showTag=function(){this._tag.style.visibility=this._startTagVisibility};b._handleStalled=function(){};createjs.TagRequest=createjs.promote(a,"AbstractRequest")})();this.createjs=this.createjs||{};(function(){function a(a,b,e){this.AbstractRequest_constructor(a);this._tag=b;this._tagSrcAttribute=e;this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var b=createjs.extend(a,createjs.TagRequest);b.load=function(){var a=createjs.proxy(this._handleStalled,this);this._stalledCallback=a;var b=createjs.proxy(this._handleProgress,this);this._handleProgress=b;this._tag.addEventListener("stalled",a);this._tag.addEventListener("progress",b);this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1);this.TagRequest_load()};b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;"loaded"!=a.readyState&&"complete"!=a.readyState||this._handleTagComplete()};b._handleStalled=function(){};b._handleProgress=function(a){!a||0<a.loaded&&0==a.total||(a=new createjs.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))};b._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler);this._tag.removeEventListener("stalled",this._stalledCallback);this._tag.removeEventListener("progress",this._progressCallback);this.TagRequest__clean()};createjs.MediaTagRequest=createjs.promote(a,"TagRequest")})();this.createjs=this.createjs||{};(function(){function a(a){this.AbstractRequest_constructor(a);this._loadTimeout=this._request=null;this._xhrLevel=1;this._rawResponse=this._response=null;this._canceled=!1;this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this);this._handleProgressProxy=createjs.proxy(this._handleProgress,this);this._handleAbortProxy=createjs.proxy(this._handleAbort,this);this._handleErrorProxy=createjs.proxy(this._handleError,this);this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this);this._handleLoadProxy=createjs.proxy(this._handleLoad,this);this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this);this._createXHR(a)}var b=createjs.extend(a,createjs.AbstractRequest);a.ACTIVEX_VERSIONS="Msxml2.XMLHTTP.6.0 Msxml2.XMLHTTP.5.0 Msxml2.XMLHTTP.4.0 MSXML2.XMLHTTP.3.0 MSXML2.XMLHTTP Microsoft.XMLHTTP".split(" ");b.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response};b.cancel=function(){this.canceled=!0;this._clean();this._request.abort()};b.load=function(){if(null==this._request)this._handleError();else{null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy);1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(c){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,c))}}};b.setResponseType=function(a){"blob"===a&&(this._responseType=a=window.URL?"blob":"arraybuffer");this._request.responseType=a};b.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null};b.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null};b._handleProgress=function(a){!a||0<a.loaded&&0==a.total||(a=new createjs.ProgressEvent(a.loaded,a.total),this.dispatchEvent(a))};b._handleLoadStart=function(a){clearTimeout(this._loadTimeout);this.dispatchEvent("loadstart")};b._handleAbort=function(a){this._clean();this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,a))};b._handleError=function(a){this._clean();this.dispatchEvent(new createjs.ErrorEvent(a.message))};b._handleReadyStateChange=function(a){4==this._request.readyState&&this._handleLoad()};b._handleLoad=function(a){if(!this.loaded)if(this.loaded=!0,a=this._checkError())this._handleError(a);else{this._response=this._getResponse();if("arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(d){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===d.name&&window.BlobBuilder&&(a=new BlobBuilder,a.append(this._response),this._response=a.getBlob())}this._clean();this.dispatchEvent(new createjs.Event("complete"))}};b._handleTimeout=function(a){this._clean();this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,a))};b._checkError=function(){var a=parseInt(this._request.status);switch(a){case 404:case 0:return Error(a)}return null};b._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(c){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(c){}return null};b._createXHR=function(a){var c=createjs.RequestUtils.isCrossDomain(a),b={},f=null;if(window.XMLHttpRequest)f=new XMLHttpRequest,c&&void 0===f.withCredentials&&window.XDomainRequest&&(f=new XDomainRequest);else{for(var g=0,h=s.ACTIVEX_VERSIONS.length;g<h;g++){var k=s.ACTIVEX_VERSIONS[g];try{f=new ActiveXObject(k);break}catch(v){}}if(null==f)return!1}null==a.mimeType&&createjs.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset\x3dutf-8");a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType);this._xhrLevel="string"===typeof f.responseType?2:1;g=a.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(a.src,a.values):a.src;f.open(a.method||createjs.AbstractLoader.GET,g,!0);c&&f instanceof XMLHttpRequest&&1==this._xhrLevel&&(b.Origin=location.origin);a.values&&a.method==createjs.AbstractLoader.POST&&(b["Content-Type"]="application/x-www-form-urlencoded");c||b["X-Requested-With"]||(b["X-Requested-With"]="XMLHttpRequest");if(a.headers)for(var n in a.headers)b[n]=a.headers[n];for(n in b)f.setRequestHeader(n,b[n]);f instanceof XMLHttpRequest&&void 0!==a.withCredentials&&(f.withCredentials=a.withCredentials);this._request=f;return!0};b._clean=function(){clearTimeout(this._loadTimeout);null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)};b.toString=function(){return"[PreloadJS XHRRequest]"};createjs.XHRRequest=createjs.promote(a,"AbstractRequest")})();this.createjs=this.createjs||{};(function(){function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.SOUND);createjs.RequestUtils.isAudioTag(a)?this._tag=a:createjs.RequestUtils.isAudioTag(a.src)?this._tag=a:createjs.RequestUtils.isAudioTag(a.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(a)?a:a.src);null!=this._tag&&(this._preferXHR=!1)}var b=createjs.extend(a,createjs.AbstractMediaLoader);a.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SOUND};b._createTag=function(a){var c=document.createElement("audio");c.autoplay=!1;c.preload="none";c.src=a;return c};createjs.SoundLoader=createjs.promote(a,"AbstractMediaLoader")})();this.createjs=this.createjs||{};(function(){var a=function(){this.duration=this.startTime=this.pan=this.volume=this.loop=this.offset=this.delay=this.interrupt=null},b=a.prototype={};a.create=function(c){if(c instanceof a||c instanceof Object){var b=new createjs.PlayPropsConfig;b.set(c);return b}throw Error("Type not recognized.");};b.set=function(a){for(var c in a)this[c]=a[c];return this};b.toString=function(){return"[PlayPropsConfig]"};createjs.PlayPropsConfig=a})();this.createjs=this.createjs||{};(function(){function a(){throw"Sound cannot be instantiated";}function b(a,c){this.init(a,c)}a.INTERRUPT_ANY="any";a.INTERRUPT_EARLY="early";a.INTERRUPT_LATE="late";a.INTERRUPT_NONE="none";a.PLAY_INITED="playInited";a.PLAY_SUCCEEDED="playSucceeded";a.PLAY_INTERRUPTED="playInterrupted";a.PLAY_FINISHED="playFinished";a.PLAY_FAILED="playFailed";a.SUPPORTED_EXTENSIONS="mp3 ogg opus mpeg wav m4a mp4 aiff wma mid".split(" ");a.EXTENSION_MAP={m4a:"mp4"};a.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/;a.defaultInterruptBehavior=a.INTERRUPT_NONE;a.alternateExtensions=[];a.activePlugin=null;a._masterVolume=1;Object.defineProperty(a,"volume",{get:function(){return this._masterVolume},set:function(c){if(null==Number(c))return!1;c=Math.max(0,Math.min(1,c));a._masterVolume=c;if(!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(c))for(var b=this._instances,d=0,g=b.length;d<g;d++)b[d].setMasterVolume(c)}});a._masterMute=!1;Object.defineProperty(a,"muted",{get:function(){return this._masterMute},set:function(a){if(null==a)return!1;this._masterMute=a;if(!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var c=this._instances,b=0,d=c.length;b<d;b++)c[b].setMasterMute(a);return!0}});Object.defineProperty(a,"capabilities",{get:function(){return null==a.activePlugin?null:a.activePlugin._capabilities},set:function(a){return!1}});a._pluginsRegistered=!1;a._lastID=0;a._instances=[];a._idHash={};a._preloadHash={};a._defaultPlayPropsHash={};a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a.getPreloadHandlers=function(){return{callback:createjs.proxy(a.initLoad,a),types:["sound"],extensions:a.SUPPORTED_EXTENSIONS}};a._handleLoadComplete=function(c){var b=c.target.getItem().src;if(a._preloadHash[b])for(var d=0,g=a._preloadHash[b].length;d<g;d++){var h=a._preloadHash[b][d];a._preloadHash[b][d]=!0;a.hasEventListener("fileload")&&(c=new createjs.Event("fileload"),c.src=h.src,c.id=h.id,c.data=h.data,c.sprite=h.sprite,a.dispatchEvent(c))}};a._handleLoadError=function(c){var b=c.target.getItem().src;if(a._preloadHash[b])for(var d=0,g=a._preloadHash[b].length;d<g;d++){var h=a._preloadHash[b][d];a._preloadHash[b][d]=!1;a.hasEventListener("fileerror")&&(c=new createjs.Event("fileerror"),c.src=h.src,c.id=h.id,c.data=h.data,c.sprite=h.sprite,a.dispatchEvent(c))}};a._registerPlugin=function(c){return c.isSupported()?(a.activePlugin=new c,!0):!1};a.registerPlugins=function(c){a._pluginsRegistered=!0;for(var b=0,d=c.length;b<d;b++)if(a._registerPlugin(c[b]))return!0;return!1};a.initializeDefaultPlugins=function(){return null!=a.activePlugin?!0:a._pluginsRegistered?!1:a.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1};a.isReady=function(){return null!=a.activePlugin};a.getCapabilities=function(){return null==a.activePlugin?null:a.activePlugin._capabilities};a.getCapability=function(c){return null==a.activePlugin?null:a.activePlugin._capabilities[c]};a.initLoad=function(c){return a._registerSound(c)};a._registerSound=function(c){if(!a.initializeDefaultPlugins())return!1;var d;c.src instanceof Object?(d=a._parseSrc(c.src),d.src=c.path+d.src):d=a._parsePath(c.src);if(null==d)return!1;c.src=d.src;c.type="sound";d=c.data;var f=null;if(null!=d&&(isNaN(d.channels)?isNaN(d)||(f=parseInt(d)):f=parseInt(d.channels),d.audioSprite))for(var g,h=d.audioSprite.length;h--;)g=d.audioSprite[h],a._idHash[g.id]={src:c.src,startTime:parseInt(g.startTime),duration:parseInt(g.duration)},g.defaultPlayProps&&(a._defaultPlayPropsHash[g.id]=createjs.PlayPropsConfig.create(g.defaultPlayProps));null!=c.id&&(a._idHash[c.id]={src:c.src});g=a.activePlugin.register(c);b.create(c.src,f);null!=d&&isNaN(d)?c.data.channels=f||b.maxPerChannel():c.data=f||b.maxPerChannel();g.type&&(c.type=g.type);c.defaultPlayProps&&(a._defaultPlayPropsHash[c.src]=createjs.PlayPropsConfig.create(c.defaultPlayProps));return g};a.registerSound=function(c,b,f,g,h){f={src:c,id:b,data:f,defaultPlayProps:h};c instanceof Object&&c.src&&(g=b,f=c);f=createjs.LoadItem.create(f);f.path=g;null==g||f.src instanceof Object||(f.src=g+c);c=a._registerSound(f);if(!c)return!1;a._preloadHash[f.src]||(a._preloadHash[f.src]=[]);a._preloadHash[f.src].push(f);if(1==a._preloadHash[f.src].length)c.on("complete",createjs.proxy(this._handleLoadComplete,this)),c.on("error",createjs.proxy(this._handleLoadError,this)),a.activePlugin.preload(c);else if(1==a._preloadHash[f.src][0])return!0;return f};a.registerSounds=function(a,c){var b=[];a.path&&(c=c?c+a.path:a.path,a=a.manifest);for(var d=0,e=a.length;d<e;d++)b[d]=createjs.Sound.registerSound(a[d].src,a[d].id,a[d].data,c,a[d].defaultPlayProps);return b};a.removeSound=function(c,e){if(null==a.activePlugin)return!1;c instanceof Object&&c.src&&(c=c.src);var d;c instanceof Object?d=a._parseSrc(c):(c=a._getSrcById(c).src,d=a._parsePath(c));if(null==d)return!1;c=d.src;null!=e&&(c=e+c);for(var g in a._idHash)a._idHash[g].src==c&&delete a._idHash[g];b.removeSrc(c);delete a._preloadHash[c];a.activePlugin.removeSound(c);return!0};a.removeSounds=function(a,c){var b=[];a.path&&(c=c?c+a.path:a.path,a=a.manifest);for(var d=0,e=a.length;d<e;d++)b[d]=createjs.Sound.removeSound(a[d].src,c);return b};a.removeAllSounds=function(){a._idHash={};a._preloadHash={};b.removeAll();a.activePlugin&&a.activePlugin.removeAllSounds()};a.loadComplete=function(c){if(!a.isReady())return!1;var b=a._parsePath(c);c=b?a._getSrcById(b.src).src:a._getSrcById(c).src;return void 0==a._preloadHash[c]?!1:1==a._preloadHash[c][0]};a._parsePath=function(c){"string"!=typeof c&&(c=c.toString());var b=c.match(a.FILE_PATTERN);if(null==b)return!1;for(var d=b[4],g=b[5],h=a.capabilities,k=0;!h[g];)if(g=a.alternateExtensions[k++],k>a.alternateExtensions.length)return null;c=c.replace("."+b[5],"."+g);return{name:d,src:c,extension:g}};a._parseSrc=function(c){var b={name:void 0,src:void 0,extension:void 0},d=a.capabilities,g;for(g in c)if(c.hasOwnProperty(g)&&d[g]){b.src=c[g];b.extension=g;break}if(!b.src)return!1;c=b.src.lastIndexOf("/");b.name=-1!=c?b.src.slice(c+1):b.src;return b};a.play=function(c,b,f,g,h,k,n,v,E){b=b instanceof Object||b instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(b):createjs.PlayPropsConfig.create({interrupt:b,delay:f,offset:g,loop:h,volume:k,pan:n,startTime:v,duration:E});c=a.createInstance(c,b.startTime,b.duration);a._playInstance(c,b)||c._playFailed();return c};a.createInstance=function(c,e,f){if(!a.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(c,e,f);var d=a._defaultPlayPropsHash[c];c=a._getSrcById(c);var h=a._parsePath(c.src),k=null;null!=h&&null!=h.src?(b.create(h.src),null==e&&(e=c.startTime),k=a.activePlugin.create(h.src,e,f||c.duration),(d=d||a._defaultPlayPropsHash[h.src])&&k.applyPlayProps(d)):k=new createjs.DefaultSoundInstance(c,e,f);k.uniqueId=a._lastID++;return k};a.stop=function(){for(var a=this._instances,c=a.length;c--;)a[c].stop()};a.setVolume=function(c){if(null==Number(c))return!1;c=Math.max(0,Math.min(1,c));a._masterVolume=c;if(!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(c))for(var b=this._instances,d=0,g=b.length;d<g;d++)b[d].setMasterVolume(c)};a.getVolume=function(){return this._masterVolume};a.setMute=function(a){if(null==a)return!1;this._masterMute=a;if(!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var c=this._instances,b=0,d=c.length;b<d;b++)c[b].setMasterMute(a);return!0};a.getMute=function(){return this._masterMute};a.setDefaultPlayProps=function(c,b){c=a._getSrcById(c);a._defaultPlayPropsHash[a._parsePath(c.src).src]=createjs.PlayPropsConfig.create(b)};a.getDefaultPlayProps=function(c){c=a._getSrcById(c);return a._defaultPlayPropsHash[a._parsePath(c.src).src]};a._playInstance=function(c,b){var d=a._defaultPlayPropsHash[c.src]||{};null==b.interrupt&&(b.interrupt=d.interrupt||a.defaultInterruptBehavior);null==b.delay&&(b.delay=d.delay||0);null==b.offset&&(b.offset=c.getPosition());null==b.loop&&(b.loop=c.loop);null==b.volume&&(b.volume=c.volume);null==b.pan&&(b.pan=c.pan);if(0==b.delay){if(!a._beginPlaying(c,b))return!1}else d=setTimeout(function(){a._beginPlaying(c,b)},b.delay),c.delayTimeoutId=d;this._instances.push(c);return!0};a._beginPlaying=function(a,c){if(!b.add(a,c.interrupt))return!1;if(!a._beginPlaying(c)){var d=createjs.indexOf(this._instances,a);-1<d&&this._instances.splice(d,1);return!1}return!0};a._getSrcById=function(c){return a._idHash[c]||{src:c}};a._playFinished=function(a){b.remove(a);a=createjs.indexOf(this._instances,a);-1<a&&this._instances.splice(a,1)};createjs.Sound=a;b.channels={};b.create=function(a,c){return null==b.get(a)?(b.channels[a]=new b(a,c),!0):!1};b.removeSrc=function(a){var c=b.get(a);if(null==c)return!1;c._removeAll();delete b.channels[a];return!0};b.removeAll=function(){for(var a in b.channels)b.channels[a]._removeAll();b.channels={}};b.add=function(a,c){var d=b.get(a.src);return null==d?!1:d._add(a,c)};b.remove=function(a){var c=b.get(a.src);if(null==c)return!1;c._remove(a);return!0};b.maxPerChannel=function(){return c.maxDefault};b.get=function(a){return b.channels[a]};var c=b.prototype;c.constructor=b;c.src=null;c.max=null;c.maxDefault=100;c.length=0;c.init=function(a,c){this.src=a;this.max=c||this.maxDefault;-1==this.max&&(this.max=this.maxDefault);this._instances=[]};c._get=function(a){return this._instances[a]};c._add=function(a,c){if(!this._getSlot(c,a))return!1;this._instances.push(a);this.length++;return!0};c._remove=function(a){a=createjs.indexOf(this._instances,a);if(-1==a)return!1;this._instances.splice(a,1);this.length--;return!0};c._removeAll=function(){for(var a=this.length-1;0<=a;a--)this._instances[a].stop()};c._getSlot=function(c,b){var d,e;if(c!=a.INTERRUPT_NONE&&(e=this._get(0),null==e))return!0;for(var h=0,k=this.max;h<k;h++){d=this._get(h);if(null==d)return!0;if(d.playState==a.PLAY_FINISHED||d.playState==a.PLAY_INTERRUPTED||d.playState==a.PLAY_FAILED){e=d;break}c!=a.INTERRUPT_NONE&&(c==a.INTERRUPT_EARLY&&d.getPosition()<e.getPosition()||c==a.INTERRUPT_LATE&&d.getPosition()>e.getPosition())&&(e=d)}return null!=e?(e._interrupt(),this._remove(e),!0):!1};c.toString=function(){return"[Sound SoundChannel]"}})();this.createjs=this.createjs||{};(function(){var a=function(a,b,e,f){this.EventDispatcher_constructor();this.src=a;this.uniqueId=-1;this.delayTimeoutId=this.playState=null;this._volume=1;Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume});this._pan=0;Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan});this._startTime=Math.max(0,b||0);Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime});this._duration=Math.max(0,e||0);Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration});this._playbackResource=null;Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource});!1!==f&&!0!==f&&this.setPlaybackResource(f);this._position=0;Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition});this._loop=0;Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop});this._muted=!1;Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted});this._paused=!1;Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},b=createjs.extend(a,createjs.EventDispatcher);b.play=function(a,b,e,f,g,h){a=a instanceof Object||a instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(a):createjs.PlayPropsConfig.create({interrupt:a,delay:b,offset:e,loop:f,volume:g,pan:h});if(this.playState==createjs.Sound.PLAY_SUCCEEDED)this.applyPlayProps(a),this._paused&&this.setPaused(!1);else return this._cleanUp(),createjs.Sound._playInstance(this,a),this};b.stop=function(){this._position=0;this._paused=!1;this._handleStop();this._cleanUp();this.playState=createjs.Sound.PLAY_FINISHED;return this};b.destroy=function(){this._cleanUp();this.playbackResource=this.src=null;this.removeAllEventListeners()};b.applyPlayProps=function(a){null!=a.offset&&this.setPosition(a.offset);null!=a.loop&&this.setLoop(a.loop);null!=a.volume&&this.setVolume(a.volume);null!=a.pan&&this.setPan(a.pan);null!=a.startTime&&(this.setStartTime(a.startTime),this.setDuration(a.duration));return this};b.toString=function(){return"[AbstractSoundInstance]"};b.getPaused=function(){return this._paused};b.setPaused=function(a){if(!(!0!==a&&!1!==a||this._paused==a||1==a&&this.playState!=createjs.Sound.PLAY_SUCCEEDED))return(this._paused=a)?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this};b.setVolume=function(a){if(a==this._volume)return this;this._volume=Math.max(0,Math.min(1,a));this._muted||this._updateVolume();return this};b.getVolume=function(){return this._volume};b.setMuted=function(a){if(!0===a||!1===a)return this._muted=a,this._updateVolume(),this};b.getMuted=function(){return this._muted};b.setPan=function(a){if(a==this._pan)return this;this._pan=Math.max(-1,Math.min(1,a));this._updatePan();return this};b.getPan=function(){return this._pan};b.getPosition=function(){this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition());return this._position};b.setPosition=function(a){this._position=Math.max(0,a);this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition();return this};b.getStartTime=function(){return this._startTime};b.setStartTime=function(a){if(a==this._startTime)return this;this._startTime=Math.max(0,a||0);this._updateStartTime();return this};b.getDuration=function(){return this._duration};b.setDuration=function(a){if(a==this._duration)return this;this._duration=Math.max(0,a||0);this._updateDuration();return this};b.setPlaybackResource=function(a){this._playbackResource=a;0==this._duration&&this._setDurationFromSource();return this};b.getPlaybackResource=function(){return this._playbackResource};b.getLoop=function(){return this._loop};b.setLoop=function(a){null!=this._playbackResource&&(0!=this._loop&&0==a?this._removeLooping(a):0==this._loop&&0!=a&&this._addLooping(a));this._loop=a};b._sendEvent=function(a){a=new createjs.Event(a);this.dispatchEvent(a)};b._cleanUp=function(){clearTimeout(this.delayTimeoutId);this._handleCleanUp();this._paused=!1;createjs.Sound._playFinished(this)};b._interrupt=function(){this._cleanUp();this.playState=createjs.Sound.PLAY_INTERRUPTED;this._sendEvent("interrupted")};b._beginPlaying=function(a){this.setPosition(a.offset);this.setLoop(a.loop);this.setVolume(a.volume);this.setPan(a.pan);null!=a.startTime&&(this.setStartTime(a.startTime),this.setDuration(a.duration));if(null!=this._playbackResource&&this._position<this._duration)return this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0;this._playFailed();return!1};b._playFailed=function(){this._cleanUp();this.playState=createjs.Sound.PLAY_FAILED;this._sendEvent("failed")};b._handleSoundComplete=function(a){this._position=0;0!=this._loop?(this._loop--,this._handleLoop(),this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete"))};b._handleSoundReady=function(){};b._updateVolume=function(){};b._updatePan=function(){};b._updateStartTime=function(){};b._updateDuration=function(){};b._setDurationFromSource=function(){};b._calculateCurrentPosition=function(){};b._updatePosition=function(){};b._removeLooping=function(a){};b._addLooping=function(a){};b._pause=function(){};b._resume=function(){};b._handleStop=function(){};b._handleCleanUp=function(){};b._handleLoop=function(){};createjs.AbstractSoundInstance=createjs.promote(a,"EventDispatcher");createjs.DefaultSoundInstance=createjs.AbstractSoundInstance})();this.createjs=this.createjs||{};(function(){var a=function(){this._capabilities=null;this._loaders={};this._audioSources={};this._soundInstances={};this._volume=1},b=a.prototype;a._capabilities=null;a.isSupported=function(){return!0};b.register=function(a){var c=this._loaders[a.src];if(c&&!c.canceled)return this._loaders[a.src];this._audioSources[a.src]=!0;this._soundInstances[a.src]=[];c=new this._loaderClass(a);c.on("complete",this._handlePreloadComplete,this);return this._loaders[a.src]=c};b.preload=function(a){a.on("error",this._handlePreloadError,this);a.load()};b.isPreloadStarted=function(a){return null!=this._audioSources[a]};b.isPreloadComplete=function(a){return!(null==this._audioSources[a]||1==this._audioSources[a])};b.removeSound=function(a){if(this._soundInstances[a]){for(var c=this._soundInstances[a].length;c--;)this._soundInstances[a][c].destroy();delete this._soundInstances[a];delete this._audioSources[a];this._loaders[a]&&this._loaders[a].destroy();delete this._loaders[a]}};b.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)};b.create=function(a,b,e){this.isPreloadStarted(a)||this.preload(this.register(a));b=new this._soundInstanceClass(a,b,e,this._audioSources[a]);this._soundInstances[a].push(b);return b};b.setVolume=function(a){this._volume=a;this._updateVolume();return!0};b.getVolume=function(){return this._volume};b.setMute=function(a){this._updateVolume();return!0};b.toString=function(){return"[AbstractPlugin]"};b._handlePreloadComplete=function(a){var c=a.target.getItem().src;this._audioSources[c]=a.result;a=0;for(var b=this._soundInstances[c].length;a<b;a++)this._soundInstances[c][a].setPlaybackResource(this._audioSources[c])};b._handlePreloadError=function(a){};b._updateVolume=function(){};createjs.AbstractPlugin=a})();this.createjs=this.createjs||{};(function(){function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.SOUND)}var b=createjs.extend(a,createjs.AbstractLoader);a.context=null;b.toString=function(){return"[WebAudioLoader]"};b._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1);this._request.setResponseType("arraybuffer")};b._sendComplete=function(c){a.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))};b._handleAudioDecoded=function(a){this._result=a;this.AbstractLoader__sendComplete()};createjs.WebAudioLoader=createjs.promote(a,"AbstractLoader")})();this.createjs=this.createjs||{};(function(){function a(a,b,f,g){this.AbstractSoundInstance_constructor(a,b,f,g);this.gainNode=c.context.createGain();this.panNode=c.context.createPanner();this.panNode.panningModel=c._panningModel;this.panNode.connect(this.gainNode);this._updatePan();this._sourceNodeNext=this._soundCompleteTimeout=this.sourceNode=null;this._playbackStartTime=0;this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var b=createjs.extend(a,createjs.AbstractSoundInstance),c=a;c.context=null;c._scratchBuffer=null;c.destinationNode=null;c._panningModel="equalpower";b.destroy=function(){this.AbstractSoundInstance_destroy();this.panNode.disconnect(0);this.panNode=null;this.gainNode.disconnect(0);this.gainNode=null};b.toString=function(){return"[WebAudioSoundInstance]"};b._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)};b._removeLooping=function(a){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)};b._addLooping=function(a){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))};b._setDurationFromSource=function(){this._duration=1E3*this.playbackResource.duration};b._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext));0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0);clearTimeout(this._soundCompleteTimeout);this._playbackStartTime=0};b._cleanUpAudioNode=function(a){if(a){a.stop(0);a.disconnect(0);try{a.buffer=c._scratchBuffer}catch(e){}a=null}return a};b._handleSoundReady=function(a){this.gainNode.connect(c.destinationNode);a=.001*this._duration;var b=.001*this._position;b>a&&(b=a);this.sourceNode=this._createAndPlayAudioNode(c.context.currentTime-a,b);this._playbackStartTime=this.sourceNode.startTime-b;this._soundCompleteTimeout=setTimeout(this._endedHandler,1E3*(a-b));0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))};b._createAndPlayAudioNode=function(a,b){var d=c.context.createBufferSource();d.buffer=this.playbackResource;d.connect(this.panNode);var e=.001*this._duration;d.startTime=a+e;d.start(d.startTime,b+.001*this._startTime,e-b);return d};b._pause=function(){this._position=1E3*(c.context.currentTime-this._playbackStartTime);this.sourceNode=this._cleanUpAudioNode(this.sourceNode);this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext);0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0);clearTimeout(this._soundCompleteTimeout)};b._resume=function(){this._handleSoundReady()};b._updateVolume=function(){var a=this._muted?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)};b._calculateCurrentPosition=function(){return 1E3*(c.context.currentTime-this._playbackStartTime)};b._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode);this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext);clearTimeout(this._soundCompleteTimeout);this._paused||this._handleSoundReady()};b._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode);this.sourceNode=this._sourceNodeNext;this._playbackStartTime=this.sourceNode.startTime;this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0);this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)};b._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())};createjs.WebAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")})();this.createjs=this.createjs||{};(function(){function a(){this.AbstractPlugin_constructor();this._panningModel=c._panningModel;this.context=c.context;this.dynamicsCompressorNode=this.context.createDynamicsCompressor();this.dynamicsCompressorNode.connect(this.context.destination);this.gainNode=this.context.createGain();this.gainNode.connect(this.dynamicsCompressorNode);createjs.WebAudioSoundInstance.destinationNode=this.gainNode;this._capabilities=c._capabilities;this._loaderClass=createjs.WebAudioLoader;this._soundInstanceClass=createjs.WebAudioSoundInstance;this._addPropsToClasses()}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c._capabilities=null;c._panningModel="equalpower";c.context=null;c._scratchBuffer=null;c._unlocked=!1;c.isSupported=function(){var a=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;if("file:"==location.protocol&&!a&&!this._isFileXHRSupported())return!1;c._generateCapabilities();return null==c.context?!1:!0};c.playEmptySound=function(){if(null!=c.context){var a=c.context.createBufferSource();a.buffer=c._scratchBuffer;a.connect(c.context.destination);a.start(0,0,0)}};c._isFileXHRSupported=function(){var a=!0,c=new XMLHttpRequest;try{c.open("GET","WebAudioPluginTest.fail",!1)}catch(f){return a=!1}c.onerror=function(){a=!1};c.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{c.send()}catch(f){a=!1}return a};c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;if(null==c.context)if(window.AudioContext)c.context=new AudioContext;else if(window.webkitAudioContext)c.context=new webkitAudioContext;else return null;null==c._scratchBuffer&&(c._scratchBuffer=c.context.createBuffer(1,1,22050));c._compatibilitySetUp();"ontouchstart"in window&&"running"!=c.context.state&&(c._unlock(),document.addEventListener("mousedown",c._unlock,!0),document.addEventListener("touchend",c._unlock,!0));c._capabilities={panning:!0,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,f=createjs.Sound.EXTENSION_MAP,g=0,h=b.length;g<h;g++){var k=b[g],n=f[k]||k;c._capabilities[k]="no"!=a.canPlayType("audio/"+k)&&""!=a.canPlayType("audio/"+k)||"no"!=a.canPlayType("audio/"+n)&&""!=a.canPlayType("audio/"+n)}2>c.context.destination.numberOfChannels&&(c._capabilities.panning=!1)}};c._compatibilitySetUp=function(){c._panningModel="equalpower";if(!c.context.createGain){c.context.createGain=c.context.createGainNode;var a=c.context.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn;a.__proto__.stop=a.__proto__.noteOff;c._panningModel=0}};c._unlock=function(){c._unlocked||(c.playEmptySound(),"running"==c.context.state&&(document.removeEventListener("mousedown",c._unlock,!0),document.removeEventListener("touchend",c._unlock,!0),c._unlocked=!0))};b.toString=function(){return"[WebAudioPlugin]"};b._addPropsToClasses=function(){var a=this._soundInstanceClass;a.context=this.context;a._scratchBuffer=c._scratchBuffer;a.destinationNode=this.gainNode;a._panningModel=this._panningModel;this._loaderClass.context=this.context};b._updateVolume=function(){var a=createjs.Sound._masterMute?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)};createjs.WebAudioPlugin=createjs.promote(a,"AbstractPlugin")})();this.createjs=this.createjs||{};(function(){function a(){throw"HTMLAudioTagPool cannot be instantiated";}function b(a){this._tags=[]}a._tags={};a._tagPool=new b;a._tagUsed={};a.get=function(c){var b=a._tags[c];null==b?(b=a._tags[c]=a._tagPool.get(),b.src=c):a._tagUsed[c]?(b=a._tagPool.get(),b.src=c):a._tagUsed[c]=!0;return b};a.set=function(c,b){b==a._tags[c]?a._tagUsed[c]=!1:a._tagPool.set(b)};a.remove=function(c){var b=a._tags[c];if(null==b)return!1;a._tagPool.set(b);delete a._tags[c];delete a._tagUsed[c];return!0};a.getDuration=function(c){c=a._tags[c];return null!=c&&c.duration?1E3*c.duration:0};createjs.HTMLAudioTagPool=a;var c=b.prototype;c.constructor=b;c.get=function(){var a;a=0==this._tags.length?this._createTag():this._tags.pop();null==a.parentNode&&document.body.appendChild(a);return a};c.set=function(a){-1==createjs.indexOf(this._tags,a)&&(this._tags.src=null,this._tags.push(a))};c.toString=function(){return"[TagPool]"};c._createTag=function(){var a=document.createElement("audio");a.autoplay=!1;a.preload="none";return a}})();this.createjs=this.createjs||{};(function(){function a(a,b,e,f){this.AbstractSoundInstance_constructor(a,b,e,f);this._delayTimeoutId=this._audioSpriteStopTime=null;this._endedHandler=createjs.proxy(this._handleSoundComplete,this);this._readyHandler=createjs.proxy(this._handleTagReady,this);this._stalledHandler=createjs.proxy(this._playFailed,this);this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this);this._loopHandler=createjs.proxy(this._handleSoundComplete,this);e?this._audioSpriteStopTime=.001*(b+e):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var b=createjs.extend(a,createjs.AbstractSoundInstance);b.setMasterVolume=function(a){this._updateVolume()};b.setMasterMute=function(a){this._updateVolume()};b.toString=function(){return"[HTMLAudioSoundInstance]"};b._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))};b._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)};b._handleCleanUp=function(){var a=this._playbackResource;if(null!=a){a.pause();a.loop=!1;a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1);a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1);a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1);a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1);a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(d){}createjs.HTMLAudioTagPool.set(this.src,a);this._playbackResource=null}};b._beginPlaying=function(a){this._playbackResource=createjs.HTMLAudioTagPool.get(this.src);return this.AbstractSoundInstance__beginPlaying(a)};b._handleSoundReady=function(a){4!==this._playbackResource.readyState?(a=this._playbackResource,a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.preload="auto",a.load()):(this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play())};b._handleTagReady=function(a){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1);this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1);this._handleSoundReady()};b._pause=function(){this._playbackResource.pause()};b._resume=function(){this._playbackResource.play()};b._updateVolume=function(){if(null!=this._playbackResource){var a=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;a!=this._playbackResource.volume&&(this._playbackResource.volume=a)}};b._calculateCurrentPosition=function(){return 1E3*this._playbackResource.currentTime-this._startTime};b._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1);this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(c){this._handleSetPositionSeek(null)}};b._handleSetPositionSeek=function(a){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))};b._handleAudioSpriteLoop=function(a){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))};b._handleLoop=function(a){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))};b._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration);this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))};b._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration);this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))};b._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src);this._playbackResource=null};createjs.HTMLAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")})();this.createjs=this.createjs||{};(function(){function a(){this.AbstractPlugin_constructor();this.defaultNumChannels=2;this._capabilities=c._capabilities;this._loaderClass=createjs.SoundLoader;this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c.MAX_INSTANCES=30;c._AUDIO_READY="canplaythrough";c._AUDIO_ENDED="ended";c._AUDIO_SEEKED="seeked";c._AUDIO_STALLED="stalled";c._TIME_UPDATE="timeupdate";c._capabilities=null;c.isSupported=function(){c._generateCapabilities();return null!=c._capabilities};c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;c._capabilities={panning:!1,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,f=createjs.Sound.EXTENSION_MAP,g=0,h=b.length;g<h;g++){var k=b[g],n=f[k]||k;c._capabilities[k]="no"!=a.canPlayType("audio/"+k)&&""!=a.canPlayType("audio/"+k)||"no"!=a.canPlayType("audio/"+n)&&""!=a.canPlayType("audio/"+n)}}};b.register=function(a){var b=createjs.HTMLAudioTagPool.get(a.src);a=this.AbstractPlugin_register(a);a.setTag(b);return a};b.removeSound=function(a){this.AbstractPlugin_removeSound(a);createjs.HTMLAudioTagPool.remove(a)};b.create=function(a,b,c){a=this.AbstractPlugin_create(a,b,c);a.setPlaybackResource(null);return a};b.toString=function(){return"[HTMLAudioPlugin]"};b.setVolume=b.getVolume=b.setMute=null;createjs.HTMLAudioPlugin=createjs.promote(a,"AbstractPlugin")})();function KMusic(a,b,c){this.init(a,b,c)}KMusic.prototype={src:null,soundInstance:null,displayStatus:null,loadProxy:null,call:null,id:null,init:function(a,b,c){this.id=b;this.call=c;this.src=a;this.loadProxy=createjs.proxy(this.handleLoad,this);createjs.Sound.addEventListener("fileload",this.loadProxy);createjs.Sound.registerSound({id:b,src:this.src});return this},handleLoad:function(a){this.call();this.soundInstance=createjs.Sound.createInstance(this.id);createjs.Sound.removeEventListener("fileload",this.loadProxy)},play:function(a){this.soundInstance.stop();this.soundInstance?this.soundInstance.play(a):this.soundInstance.play()}};function RES(){}RES.RES_JSON={};RES.load=function(a,b){var c=Object.getOwnPropertyNames(RES.RES_JSON).length,d=0;if(0==c)a(1,1),RES.makeImageSrcRight(),b();else for(var e in RES.RES_JSON){var f=RES.RES_JSON[e].src,g=function(e){switch(RES.RES_JSON[e].type){case "image":var g=new Image;g.src=f;if(g.complete){RES.RES_JSON[e].isLoad=!0;RES.DATA_SET[e]=g;d++;a(d,c);d==c&&b();break}g.onload=function(){RES.RES_JSON[e].isLoad=!0;RES.DATA_SET[e]=g;d++;a(d,c);d==c&&(RES.makeImageSrcRight(),b())};break;case "music":var h=new KMusic(f,e,function(){RES.RES_JSON[e].isLoad=!0;RES.DATA_SET[e]=h;d++;a(d,c);d==c&&(RES.makeImageSrcRight(),b())});break;default:g=new Image,g.src=f,g.complete?(RES.RES_JSON[e].isLoad=!0,RES.DATA_SET[e]=g,d++,a(d,c),d==c&&b()):g.onload=function(){RES.RES_JSON[e].isLoad=!0;RES.DATA_SET[e]=g;d++;a(d,c);d==c&&b()}}};try{g(e)}catch(h){console.error("err:img load:"+e)}}};RES.DATA_SET={};RES.getRES=function(a){switch(RES.RES_JSON[a].type){case "music":try{if(RES.RES_JSON[a].isLoad){var b=RES.DATA_SET[a];return b}console.error("err:music load"+a)}catch(c){console.error("err:music load:"+a)}break;case "image":try{if(RES.RES_JSON[a].isLoad)return b=RES.DATA_SET[a];console.error("err:img load"+a)}catch(c){console.error("err:img load:"+a)}break;default:try{if(RES.RES_JSON[a].isLoad)return b=RES.DATA_SET[a];console.error("err:img load:"+a)}catch(c){console.error("err:img load:"+a)}}};RES.getMusic=function(a){try{if(RES.RES_JSON[a].isLoad)return RES.DATA_SET[a];console.error("err:music load"+a)}catch(b){console.error("err:music load:"+a)}};RES.getSpirteRES=function(a){if(RES.RES_JSON[a].isLoad){var b={};b.img=RES.DATA_SET[a];a=RES.RES_JSON[a];b.action=a.action;b.res=a.res;return b}alert("err:img load")};RES.getFontRES=function(a){if(RES.RES_JSON[a].isLoad){var b={};b.img=RES.DATA_SET[a];b.res=RES.RES_JSON[a].frames;return b}alert("err:img load")};RES.makeImageSrcRight=function(){for(var a in RES.DATA_SET)if(void 0==RES.RES_JSON[a].type||"image"==RES.RES_JSON[a].type){var b=RES.RES_JSON[a].src.split(".")[0].split("/")[1];if(-1==RES.DATA_SET[a].src.indexOf(b))for(var c in RES.DATA_SET)void 0!=RES.RES_JSON[c].type&&"image"!=RES.RES_JSON[c].type||-1==RES.DATA_SET[c].src.indexOf(b)||(RES.DATA_SET[a]=RES.DATA_SET[c])}};